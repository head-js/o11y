var AnalyticsPluginSegmentio=function(){"use strict";function e(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{u(n.next(e))}catch(e){i(e)}}function s(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))}function t(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n={},o={},i={};Object.defineProperty(i,"__esModule",{value:!0}),i.clone=void 0,i.clone=function e(t){if("[object Object]"===Object.prototype.toString.call(t)){var r={};for(var n in t)r[n]=e(t[n]);return r}return Array.isArray(t)?t.map(e):t};var a={};Object.defineProperty(a,"__esModule",{value:!0});var s={Salesforce:!0};a.default=function(e){return!s[e]};var u={},c=/^(\d{4})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:([ T])(\d{2}):?(\d{2})(?::?(\d{2})(?:[,\.](\d{1,}))?)?(?:(Z)|([+\-])(\d{2})(?::?(\d{2}))?)?)?$/;u.parse=function(e){var t=[1,5,6,7,11,12],r=c.exec(e),n=0;if(!r)return new Date(e);for(var o,i=0;o=t[i];i++)r[o]=parseInt(r[o],10)||0;r[2]=parseInt(r[2],10)||1,r[3]=parseInt(r[3],10)||1,r[2]--,r[8]=r[8]?(r[8]+"00").substring(0,3):0," "===r[4]?n=(new Date).getTimezoneOffset():"Z"!==r[9]&&r[10]&&(n=60*r[11]+r[12],"+"===r[10]&&(n=0-n));var a=Date.UTC(r[1],r[2],r[3],r[5],r[6]+n,r[7],r[8]);return new Date(a)},u.is=function(e,t){return"string"==typeof e&&((!t||!1!==/^\d{4}-\d{2}-\d{2}/.test(e))&&c.test(e))};var p={},l=/\d{13}/;p.is=function(e){return l.test(e)},p.parse=function(e){return e=parseInt(e,10),new Date(e)};var f={},d=/\d{10}/;f.is=function(e){return d.test(e)},f.parse=function(e){var t=1e3*parseInt(e,10);return new Date(t)};var y=u,v=p,h=f,m=Object.prototype.toString;var x=function(e){return t=e,"[object Date]"===m.call(t)?e:function(e){return"[object Number]"===m.call(e)}(e)?new Date((r=e)<315576e5?1e3*r:r):y.is(e)?y.parse(e):v.is(e)?v.parse(e):h.is(e)?h.parse(e):new Date(e);var t,r};var b={exports:{}};!function(e){function t(e){return function(t,r,n,i){var a,s=i&&function(e){return"function"==typeof e}(i.normalizer)?i.normalizer:o;r=s(r);for(var u=!1;!u;)c();function c(){for(a in t){var e=s(a);if(0===r.indexOf(e)){var n=r.substr(e.length);if("."===n.charAt(0)||0===n.length){r=n.substr(1);var o=t[a];return null==o?void(u=!0):r.length?void(t=o):void(u=!0)}}}a=void 0,u=!0}if(a)return null==t?t:e(t,a,n)}}function r(e,t){return e.hasOwnProperty(t)&&delete e[t],e}function n(e,t,r){return e.hasOwnProperty(t)&&(e[t]=r),e}function o(e){return e.replace(/[^a-zA-Z0-9\.]+/g,"").toLowerCase()}e.exports=t((function(e,t){if(e.hasOwnProperty(t))return e[t]})),e.exports.find=e.exports,e.exports.replace=function(e,r,o,i){return t(n).call(this,e,r,o,i),e},e.exports.del=function(e,n,o){return t(r).call(this,e,n,null,o),e}}(b);var g=u,w=_;function _(e,t){return void 0===t&&(t=!0),e&&"object"==typeof e?function(e,t){return Object.keys(e).forEach((function(r){e[r]=_(e[r],t)})),e}(e,t):Array.isArray(e)?function(e,t){return e.forEach((function(r,n){e[n]=_(r,t)})),e}(e,t):g.is(e,t)?g.parse(e):e}var j=r&&r.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(o,"__esModule",{value:!0}),o.Facade=void 0;var P=i,I=j(a),O=j(x),F=j(b.exports),k=j(w);function D(e,t){t=t||{},this.raw=P.clone(e),"clone"in t||(t.clone=!0),t.clone&&(e=P.clone(e)),"traverse"in t||(t.traverse=!0),e.timestamp="timestamp"in e?O.default(e.timestamp):new Date,t.traverse&&k.default(e),this.opts=t,this.obj=e}o.Facade=D;var S=D.prototype;function T(e){return P.clone(e)}S.proxy=function(e){var t=e.split("."),r=this[e=t.shift()]||this.field(e);return r?("function"==typeof r&&(r=r.call(this)||{}),0===t.length||(r=F.default(r,t.join("."))),this.opts.clone?T(r):r):r},S.field=function(e){var t=this.obj[e];return this.opts.clone?T(t):t},D.proxy=function(e){return function(){return this.proxy(e)}},D.field=function(e){return function(){return this.field(e)}},D.multi=function(e){return function(){var t=this.proxy(e+"s");if(Array.isArray(t))return t;var r=this.proxy(e);return r&&(r=[this.opts.clone?P.clone(r):r]),r||[]}},D.one=function(e){return function(){var t=this.proxy(e);if(t)return t;var r=this.proxy(e+"s");return Array.isArray(r)?r[0]:void 0}},S.json=function(){var e=this.opts.clone?P.clone(this.obj):this.obj;return this.type&&(e.type=this.type()),e},S.rawEvent=function(){return this.raw},S.options=function(e){var t=this.obj.options||this.obj.context||{},r=this.opts.clone?P.clone(t):t;if(!e)return r;if(this.enabled(e)){var n=this.integrations(),o=n[e]||F.default(n,e);return"object"!=typeof o&&(o=F.default(this.options(),e)),"object"==typeof o?o:{}}},S.context=S.options,S.enabled=function(e){var t=this.proxy("options.providers.all");"boolean"!=typeof t&&(t=this.proxy("options.all")),"boolean"!=typeof t&&(t=this.proxy("integrations.all")),"boolean"!=typeof t&&(t=!0);var r=t&&I.default(e),n=this.integrations();if(n.providers&&n.providers.hasOwnProperty(e)&&(r=n.providers[e]),n.hasOwnProperty(e)){var o=n[e];r="boolean"!=typeof o||o}return!!r},S.integrations=function(){return this.obj.integrations||this.proxy("options.providers")||this.options()},S.active=function(){var e=this.proxy("options.active");return null==e&&(e=!0),e},S.anonymousId=function(){return this.field("anonymousId")||this.field("sessionId")},S.sessionId=S.anonymousId,S.groupId=D.proxy("options.groupId"),S.traits=function(e){var t=this.proxy("options.traits")||{},r=this.userId();for(var n in e=e||{},r&&(t.id=r),e){var o=null==this[n]?this.proxy("options.traits."+n):this[n]();null!=o&&(t[e[n]]=o,delete t[n])}return t},S.library=function(){var e=this.proxy("options.library");return e?"string"==typeof e?{name:e,version:null}:e:{name:"unknown",version:null}},S.device=function(){var e=this.proxy("context.device");"object"==typeof e&&null!==e||(e={});var t=this.library().name;return e.type||(t.indexOf("ios")>-1&&(e.type="ios"),t.indexOf("android")>-1&&(e.type="android")),e},S.userAgent=D.proxy("context.userAgent"),S.timezone=D.proxy("context.timezone"),S.timestamp=D.field("timestamp"),S.channel=D.field("channel"),S.ip=D.proxy("context.ip"),S.userId=D.field("userId");var A={},M={exports:{}};"function"==typeof Object.create?M.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:M.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}};var L={};Object.defineProperty(L,"__esModule",{value:!0});var C=/.+\@.+\..+/;L.default=function(e){return C.test(e)};var N=r&&r.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(A,"__esModule",{value:!0}),A.Identify=void 0;var z=o,R=N(b.exports),U=N(M.exports),q=N(L),E=N(x),H=function(e){return e.trim()};function $(e,t){z.Facade.call(this,e,t)}A.Identify=$,U.default($,z.Facade);var Z=$.prototype;Z.action=function(){return"identify"},Z.type=Z.action,Z.traits=function(e){var t=this.field("traits")||{},r=this.userId();for(var n in e=e||{},r&&(t.id=r),e){var o=null==this[n]?this.proxy("traits."+n):this[n]();null!=o&&(t[e[n]]=o,n!==e[n]&&delete t[n])}return t},Z.email=function(){var e=this.proxy("traits.email");if(e)return e;var t=this.userId();return q.default(t)?t:void 0},Z.created=function(){var e=this.proxy("traits.created")||this.proxy("traits.createdAt");if(e)return E.default(e)},Z.name=function(){var e=this.proxy("traits.name");if("string"==typeof e)return H(e);var t=this.firstName(),r=this.lastName();return t&&r?H(t+" "+r):void 0},Z.uid=function(){return this.userId()||this.username()||this.email()},Z.description=function(){return this.proxy("traits.description")||this.proxy("traits.background")},Z.avatar=function(){var e=this.traits();return R.default(e,"avatar")||R.default(e,"photoUrl")||R.default(e,"avatarUrl")},Z.username=z.Facade.proxy("traits.username");var G={},J=r&&r.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(G,"__esModule",{value:!0}),G.Track=void 0;var K=J(M.exports),V=o,B=A,W=J(L);function X(e,t){V.Facade.call(this,e,t)}G.Track=X,K.default(X,V.Facade);var Q=X.prototype;Q.action=function(){return"track"},Q.type=Q.action,Q.event=V.Facade.field("event"),Q.value=V.Facade.proxy("properties.value"),Q.category=V.Facade.proxy("properties.category"),Q.id=V.Facade.proxy("properties.id"),Q.name=V.Facade.proxy("properties.name"),Q.description=V.Facade.proxy("properties.description"),Q.plan=V.Facade.proxy("properties.plan"),Q.referrer=function(){return this.proxy("context.referrer.url")||this.proxy("context.page.referrer")||this.proxy("properties.referrer")},Q.query=V.Facade.proxy("options.query"),Q.properties=function(e){var t=this.field("properties")||{};for(var r in e=e||{}){var n=null==this[r]?this.proxy("properties."+r):this[r]();null!=n&&(t[e[r]]=n,delete t[r])}return t},Q.username=function(){return this.proxy("traits.username")||this.proxy("properties.username")||this.userId()||this.sessionId()},Q.email=function(){var e=this.proxy("traits.email")||this.proxy("properties.email")||this.proxy("options.traits.email");if(e)return e;var t=this.userId();return W.default(t)?t:void 0},Q.revenue=function(){var e=this.proxy("properties.revenue"),t=this.event();return!e&&t&&t.match(/^[ _]?completed[ _]?order[ _]?|^[ _]?order[ _]?completed[ _]?$/i)&&(e=this.proxy("properties.total")),function(e){if(!e)return;if("number"==typeof e)return e;if("string"!=typeof e)return;if(e=e.replace(/\$/g,""),e=parseFloat(e),!isNaN(e))return e}(e)},Q.identify=function(){var e=this.json();return e.traits=this.traits(),new B.Identify(e,this.opts)};var Y={},ee=r&&r.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Y,"__esModule",{value:!0}),Y.Page=void 0;var te=ee(M.exports),re=o,ne=G,oe=ee(L);function ie(e,t){re.Facade.call(this,e,t)}Y.Page=ie,te.default(ie,re.Facade);var ae=ie.prototype;ae.action=function(){return"page"},ae.type=ae.action,ae.category=re.Facade.field("category"),ae.name=re.Facade.field("name"),ae.title=re.Facade.proxy("properties.title"),ae.path=re.Facade.proxy("properties.path"),ae.url=re.Facade.proxy("properties.url"),ae.referrer=function(){return this.proxy("context.referrer.url")||this.proxy("context.page.referrer")||this.proxy("properties.referrer")},ae.properties=function(e){var t=this.field("properties")||{},r=this.category(),n=this.name();for(var o in e=e||{},r&&(t.category=r),n&&(t.name=n),e){var i=null==this[o]?this.proxy("properties."+o):this[o]();null!=i&&(t[e[o]]=i,o!==e[o]&&delete t[o])}return t},ae.email=function(){var e=this.proxy("context.traits.email")||this.proxy("properties.email");if(e)return e;var t=this.userId();return oe.default(t)?t:void 0},ae.fullName=function(){var e=this.category(),t=this.name();return t&&e?e+" "+t:t},ae.event=function(e){return e?"Viewed "+e+" Page":"Loaded a Page"},ae.track=function(e){var t=this.json();return t.event=this.event(e),t.timestamp=this.timestamp(),t.properties=this.properties(),new ne.Track(t,this.opts)};var se={},ue=r&&r.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(se,"__esModule",{value:!0}),se.Screen=void 0;var ce=ue(M.exports),pe=Y,le=G;function fe(e,t){pe.Page.call(this,e,t)}se.Screen=fe,ce.default(fe,pe.Page),fe.prototype.action=function(){return"screen"},fe.prototype.type=fe.prototype.action,fe.prototype.event=function(e){return e?"Viewed "+e+" Screen":"Loaded a Screen"},fe.prototype.track=function(e){var t=this.json();return t.event=this.event(e),t.timestamp=this.timestamp(),t.properties=this.properties(),new le.Track(t,this.opts)};var de={},ye=r&&r.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(de,"__esModule",{value:!0}),de.Delete=void 0;var ve=ye(M.exports),he=o;function me(e,t){he.Facade.call(this,e,t)}function xe(e,t){return t=t||{},new Promise((function(r,n){var o=new XMLHttpRequest,i=[],a=[],s={},u=function(){return{ok:2==(o.status/100|0),statusText:o.statusText,status:o.status,url:o.responseURL,text:function(){return Promise.resolve(o.responseText)},json:function(){return Promise.resolve(o.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([o.response]))},clone:u,headers:{keys:function(){return i},entries:function(){return a},get:function(e){return s[e.toLowerCase()]},has:function(e){return e.toLowerCase()in s}}}};for(var c in o.open(t.method||"get",e,!0),o.onload=function(){o.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,(function(e,t,r){i.push(t=t.toLowerCase()),a.push([t,r]),s[t]=s[t]?s[t]+","+r:r})),r(u())},o.onerror=n,o.withCredentials="include"==t.credentials,t.headers)o.setRequestHeader(c,t.headers[c]);o.send(t.body||null)}))}de.Delete=me,ve.default(me,he.Facade),me.prototype.type=function(){return"delete"},function(e){var t=r&&r.__assign||function(){return(t=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.Delete=e.Screen=e.Page=e.Track=e.Identify=e.Facade=void 0;var n=o;Object.defineProperty(e,"Facade",{enumerable:!0,get:function(){return n.Facade}});var i=A;Object.defineProperty(e,"Identify",{enumerable:!0,get:function(){return i.Identify}});var a=G;Object.defineProperty(e,"Track",{enumerable:!0,get:function(){return a.Track}});var s=Y;Object.defineProperty(e,"Page",{enumerable:!0,get:function(){return s.Page}});var u=se;Object.defineProperty(e,"Screen",{enumerable:!0,get:function(){return u.Screen}});var c=de;Object.defineProperty(e,"Delete",{enumerable:!0,get:function(){return c.Delete}}),e.default=t(t({},n.Facade),{Identify:i.Identify,Track:a.Track,Page:s.Page,Screen:u.Screen,Delete:c.Delete})}(n);var be=xe;"undefined"!=typeof window&&(be=window.fetch||xe);function ge(e){return e.startsWith("?")&&(e=e.substring(1)),(e=e.replace(/\?/g,"&")).split("&").reduce((function(e,t){var r=t.split("="),n=r[0],o=r[1],i=void 0===o?"":o;if(n.includes("utm_")&&n.length>4){var a=n.substr(4);"campaign"===a&&(a="name"),e[a]=function(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(t){return e}}(i)}return e}),{})}function we(e,t,r,n){var o,i,a=e.user(),s=window.location.search;t.context=null!==(i=null!==(o=t.context)&&void 0!==o?o:t.options)&&void 0!==i?i:{};var u=t.context,c=t.anonymousId;delete t.options,t.writeKey=null==r?void 0:r.apiKey,u.userAgent=window.navigator.userAgent;var p=navigator.userLanguage||navigator.language;for(var l in void 0===u.locale&&void 0!==p&&(u.locale=p),u.library||(u.library={name:"analytics.js",version:"next-1.45.0"}),s&&!u.campaign&&(u.campaign=ge(s)),t.userId=t.userId||a.id(),t.anonymousId=a.anonymousId(c),t.sentAt=new Date,n){n[l].bundlingStatus}return t}return function(r,o,i){var a,s,u=null!==(a=null==o?void 0:o.apiHost)&&void 0!==a?a:"api.segment.io/v1",c=(null!==(s=null==o?void 0:o.protocol)&&void 0!==s?s:"https")+"://"+u,p={dispatch:function(e,t){return be(e,{headers:{"Content-Type":"text/plain"},method:"post",body:JSON.stringify(t)})}};function l(a){return e(this,void 0,void 0,(function(){var e,s;return t(this,(function(t){var u,l,f;return e=a.event.type.charAt(0),s=(u=a.event,f=new n.Facade(u,l),"track"===u.type&&(f=new n.Track(u,l)),"identify"===u.type&&(f=new n.Identify(u,l)),"page"===u.type&&(f=new n.Page(u,l)),"alias"===u.type&&(f=new n.Alias(u,l)),"group"===u.type&&(f=new n.Group(u,l)),"screen"===u.type&&(f=new n.Screen(u,l)),Object.defineProperty(f,"obj",{value:u,writable:!0}),f).json(),"track"===a.event.type&&delete s.traits,[2,p.dispatch(c+"/"+e,we(r,s,o,i)).then((function(){return a}))]}))}))}return{name:"Segment.io",type:"after",version:"0.1.0",isLoaded:function(){return!0},load:function(){return Promise.resolve()},track:l,page:l}}}();