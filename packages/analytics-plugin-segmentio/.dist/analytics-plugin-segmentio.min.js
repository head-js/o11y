var AnalyticsPluginSegmentio=function(){"use strict";var e=function(){return(e=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function t(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{u(n.next(e))}catch(e){i(e)}}function s(e){try{u(n.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))}function r(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},o={},i={},a={};Object.defineProperty(a,"__esModule",{value:!0}),a.clone=void 0,a.clone=function e(t){if("[object Object]"===Object.prototype.toString.call(t)){var r={};for(var n in t)r[n]=e(t[n]);return r}return Array.isArray(t)?t.map(e):t};var s={};Object.defineProperty(s,"__esModule",{value:!0});var u={Salesforce:!0};s.default=function(e){return!u[e]};var c={},p=/^(\d{4})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:([ T])(\d{2}):?(\d{2})(?::?(\d{2})(?:[,\.](\d{1,}))?)?(?:(Z)|([+\-])(\d{2})(?::?(\d{2}))?)?)?$/;c.parse=function(e){var t=[1,5,6,7,11,12],r=p.exec(e),n=0;if(!r)return new Date(e);for(var o,i=0;o=t[i];i++)r[o]=parseInt(r[o],10)||0;r[2]=parseInt(r[2],10)||1,r[3]=parseInt(r[3],10)||1,r[2]--,r[8]=r[8]?(r[8]+"00").substring(0,3):0," "===r[4]?n=(new Date).getTimezoneOffset():"Z"!==r[9]&&r[10]&&(n=60*r[11]+r[12],"+"===r[10]&&(n=0-n));var a=Date.UTC(r[1],r[2],r[3],r[5],r[6]+n,r[7],r[8]);return new Date(a)},c.is=function(e,t){return"string"==typeof e&&((!t||!1!==/^\d{4}-\d{2}-\d{2}/.test(e))&&p.test(e))};var l={},f=/\d{13}/;l.is=function(e){return f.test(e)},l.parse=function(e){return e=parseInt(e,10),new Date(e)};var d={},v=/\d{10}/;d.is=function(e){return v.test(e)},d.parse=function(e){var t=1e3*parseInt(e,10);return new Date(t)};var y=c,h=l,m=d,x=Object.prototype.toString;var g=function(e){return t=e,"[object Date]"===x.call(t)?e:function(e){return"[object Number]"===x.call(e)}(e)?new Date((r=e)<315576e5?1e3*r:r):y.is(e)?y.parse(e):h.is(e)?h.parse(e):m.is(e)?m.parse(e):new Date(e);var t,r};var b={exports:{}};!function(e){function t(e){return function(t,r,n,i){var a,s=i&&function(e){return"function"==typeof e}(i.normalizer)?i.normalizer:o;r=s(r);for(var u=!1;!u;)c();function c(){for(a in t){var e=s(a);if(0===r.indexOf(e)){var n=r.substr(e.length);if("."===n.charAt(0)||0===n.length){r=n.substr(1);var o=t[a];return null==o?void(u=!0):r.length?void(t=o):void(u=!0)}}}a=void 0,u=!0}if(a)return null==t?t:e(t,a,n)}}function r(e,t){return e.hasOwnProperty(t)&&delete e[t],e}function n(e,t,r){return e.hasOwnProperty(t)&&(e[t]=r),e}function o(e){return e.replace(/[^a-zA-Z0-9\.]+/g,"").toLowerCase()}e.exports=t((function(e,t){if(e.hasOwnProperty(t))return e[t]})),e.exports.find=e.exports,e.exports.replace=function(e,r,o,i){return t(n).call(this,e,r,o,i),e},e.exports.del=function(e,n,o){return t(r).call(this,e,n,null,o),e}}(b);var w=c,_=j;function j(e,t){return void 0===t&&(t=!0),e&&"object"==typeof e?function(e,t){return Object.keys(e).forEach((function(r){e[r]=j(e[r],t)})),e}(e,t):Array.isArray(e)?function(e,t){return e.forEach((function(r,n){e[n]=j(r,t)})),e}(e,t):w.is(e,t)?w.parse(e):e}var P=n&&n.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(i,"__esModule",{value:!0}),i.Facade=void 0;var O=a,I=P(s),F=P(g),k=P(b.exports),D=P(_);function S(e,t){t=t||{},this.raw=O.clone(e),"clone"in t||(t.clone=!0),t.clone&&(e=O.clone(e)),"traverse"in t||(t.traverse=!0),e.timestamp="timestamp"in e?F.default(e.timestamp):new Date,t.traverse&&D.default(e),this.opts=t,this.obj=e}i.Facade=S;var T=S.prototype;function A(e){return O.clone(e)}T.proxy=function(e){var t=e.split("."),r=this[e=t.shift()]||this.field(e);return r?("function"==typeof r&&(r=r.call(this)||{}),0===t.length||(r=k.default(r,t.join("."))),this.opts.clone?A(r):r):r},T.field=function(e){var t=this.obj[e];return this.opts.clone?A(t):t},S.proxy=function(e){return function(){return this.proxy(e)}},S.field=function(e){return function(){return this.field(e)}},S.multi=function(e){return function(){var t=this.proxy(e+"s");if(Array.isArray(t))return t;var r=this.proxy(e);return r&&(r=[this.opts.clone?O.clone(r):r]),r||[]}},S.one=function(e){return function(){var t=this.proxy(e);if(t)return t;var r=this.proxy(e+"s");return Array.isArray(r)?r[0]:void 0}},T.json=function(){var e=this.opts.clone?O.clone(this.obj):this.obj;return this.type&&(e.type=this.type()),e},T.rawEvent=function(){return this.raw},T.options=function(e){var t=this.obj.options||this.obj.context||{},r=this.opts.clone?O.clone(t):t;if(!e)return r;if(this.enabled(e)){var n=this.integrations(),o=n[e]||k.default(n,e);return"object"!=typeof o&&(o=k.default(this.options(),e)),"object"==typeof o?o:{}}},T.context=T.options,T.enabled=function(e){var t=this.proxy("options.providers.all");"boolean"!=typeof t&&(t=this.proxy("options.all")),"boolean"!=typeof t&&(t=this.proxy("integrations.all")),"boolean"!=typeof t&&(t=!0);var r=t&&I.default(e),n=this.integrations();if(n.providers&&n.providers.hasOwnProperty(e)&&(r=n.providers[e]),n.hasOwnProperty(e)){var o=n[e];r="boolean"!=typeof o||o}return!!r},T.integrations=function(){return this.obj.integrations||this.proxy("options.providers")||this.options()},T.active=function(){var e=this.proxy("options.active");return null==e&&(e=!0),e},T.anonymousId=function(){return this.field("anonymousId")||this.field("sessionId")},T.sessionId=T.anonymousId,T.groupId=S.proxy("options.groupId"),T.traits=function(e){var t=this.proxy("options.traits")||{},r=this.userId();for(var n in e=e||{},r&&(t.id=r),e){var o=null==this[n]?this.proxy("options.traits."+n):this[n]();null!=o&&(t[e[n]]=o,delete t[n])}return t},T.library=function(){var e=this.proxy("options.library");return e?"string"==typeof e?{name:e,version:null}:e:{name:"unknown",version:null}},T.device=function(){var e=this.proxy("context.device");"object"==typeof e&&null!==e||(e={});var t=this.library().name;return e.type||(t.indexOf("ios")>-1&&(e.type="ios"),t.indexOf("android")>-1&&(e.type="android")),e},T.userAgent=S.proxy("context.userAgent"),T.timezone=S.proxy("context.timezone"),T.timestamp=S.field("timestamp"),T.channel=S.field("channel"),T.ip=S.proxy("context.ip"),T.userId=S.field("userId");var M={},L={exports:{}};"function"==typeof Object.create?L.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:L.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}};var C={};Object.defineProperty(C,"__esModule",{value:!0});var N=/.+\@.+\..+/;C.default=function(e){return N.test(e)};var z=n&&n.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(M,"__esModule",{value:!0}),M.Identify=void 0;var R=i,U=z(b.exports),q=z(L.exports),E=z(C),H=z(g),$=function(e){return e.trim()};function Z(e,t){R.Facade.call(this,e,t)}M.Identify=Z,q.default(Z,R.Facade);var G=Z.prototype;G.action=function(){return"identify"},G.type=G.action,G.traits=function(e){var t=this.field("traits")||{},r=this.userId();for(var n in e=e||{},r&&(t.id=r),e){var o=null==this[n]?this.proxy("traits."+n):this[n]();null!=o&&(t[e[n]]=o,n!==e[n]&&delete t[n])}return t},G.email=function(){var e=this.proxy("traits.email");if(e)return e;var t=this.userId();return E.default(t)?t:void 0},G.created=function(){var e=this.proxy("traits.created")||this.proxy("traits.createdAt");if(e)return H.default(e)},G.name=function(){var e=this.proxy("traits.name");if("string"==typeof e)return $(e);var t=this.firstName(),r=this.lastName();return t&&r?$(t+" "+r):void 0},G.uid=function(){return this.userId()||this.username()||this.email()},G.description=function(){return this.proxy("traits.description")||this.proxy("traits.background")},G.avatar=function(){var e=this.traits();return U.default(e,"avatar")||U.default(e,"photoUrl")||U.default(e,"avatarUrl")},G.username=R.Facade.proxy("traits.username");var J={},K=n&&n.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(J,"__esModule",{value:!0}),J.Track=void 0;var V=K(L.exports),B=i,W=M,X=K(C);function Q(e,t){B.Facade.call(this,e,t)}J.Track=Q,V.default(Q,B.Facade);var Y=Q.prototype;Y.action=function(){return"track"},Y.type=Y.action,Y.event=B.Facade.field("event"),Y.value=B.Facade.proxy("properties.value"),Y.category=B.Facade.proxy("properties.category"),Y.id=B.Facade.proxy("properties.id"),Y.name=B.Facade.proxy("properties.name"),Y.description=B.Facade.proxy("properties.description"),Y.plan=B.Facade.proxy("properties.plan"),Y.referrer=function(){return this.proxy("context.referrer.url")||this.proxy("context.page.referrer")||this.proxy("properties.referrer")},Y.query=B.Facade.proxy("options.query"),Y.properties=function(e){var t=this.field("properties")||{};for(var r in e=e||{}){var n=null==this[r]?this.proxy("properties."+r):this[r]();null!=n&&(t[e[r]]=n,delete t[r])}return t},Y.username=function(){return this.proxy("traits.username")||this.proxy("properties.username")||this.userId()||this.sessionId()},Y.email=function(){var e=this.proxy("traits.email")||this.proxy("properties.email")||this.proxy("options.traits.email");if(e)return e;var t=this.userId();return X.default(t)?t:void 0},Y.revenue=function(){var e=this.proxy("properties.revenue"),t=this.event();return!e&&t&&t.match(/^[ _]?completed[ _]?order[ _]?|^[ _]?order[ _]?completed[ _]?$/i)&&(e=this.proxy("properties.total")),function(e){if(!e)return;if("number"==typeof e)return e;if("string"!=typeof e)return;if(e=e.replace(/\$/g,""),e=parseFloat(e),!isNaN(e))return e}(e)},Y.identify=function(){var e=this.json();return e.traits=this.traits(),new W.Identify(e,this.opts)};var ee={},te=n&&n.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ee,"__esModule",{value:!0}),ee.Page=void 0;var re=te(L.exports),ne=i,oe=J,ie=te(C);function ae(e,t){ne.Facade.call(this,e,t)}ee.Page=ae,re.default(ae,ne.Facade);var se=ae.prototype;se.action=function(){return"page"},se.type=se.action,se.category=ne.Facade.field("category"),se.name=ne.Facade.field("name"),se.title=ne.Facade.proxy("properties.title"),se.path=ne.Facade.proxy("properties.path"),se.url=ne.Facade.proxy("properties.url"),se.referrer=function(){return this.proxy("context.referrer.url")||this.proxy("context.page.referrer")||this.proxy("properties.referrer")},se.properties=function(e){var t=this.field("properties")||{},r=this.category(),n=this.name();for(var o in e=e||{},r&&(t.category=r),n&&(t.name=n),e){var i=null==this[o]?this.proxy("properties."+o):this[o]();null!=i&&(t[e[o]]=i,o!==e[o]&&delete t[o])}return t},se.email=function(){var e=this.proxy("context.traits.email")||this.proxy("properties.email");if(e)return e;var t=this.userId();return ie.default(t)?t:void 0},se.fullName=function(){var e=this.category(),t=this.name();return t&&e?e+" "+t:t},se.event=function(e){return e?"Viewed "+e+" Page":"Loaded a Page"},se.track=function(e){var t=this.json();return t.event=this.event(e),t.timestamp=this.timestamp(),t.properties=this.properties(),new oe.Track(t,this.opts)};var ue={},ce=n&&n.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ue,"__esModule",{value:!0}),ue.Screen=void 0;var pe=ce(L.exports),le=ee,fe=J;function de(e,t){le.Page.call(this,e,t)}ue.Screen=de,pe.default(de,le.Page),de.prototype.action=function(){return"screen"},de.prototype.type=de.prototype.action,de.prototype.event=function(e){return e?"Viewed "+e+" Screen":"Loaded a Screen"},de.prototype.track=function(e){var t=this.json();return t.event=this.event(e),t.timestamp=this.timestamp(),t.properties=this.properties(),new fe.Track(t,this.opts)};var ve={},ye=n&&n.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ve,"__esModule",{value:!0}),ve.Delete=void 0;var he=ye(L.exports),me=i;function xe(e,t){me.Facade.call(this,e,t)}function ge(e,t){return t=t||{},new Promise((function(r,n){var o=new XMLHttpRequest,i=[],a=[],s={},u=function(){return{ok:2==(o.status/100|0),statusText:o.statusText,status:o.status,url:o.responseURL,text:function(){return Promise.resolve(o.responseText)},json:function(){return Promise.resolve(o.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([o.response]))},clone:u,headers:{keys:function(){return i},entries:function(){return a},get:function(e){return s[e.toLowerCase()]},has:function(e){return e.toLowerCase()in s}}}};for(var c in o.open(t.method||"get",e,!0),o.onload=function(){o.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,(function(e,t,r){i.push(t=t.toLowerCase()),a.push([t,r]),s[t]=s[t]?s[t]+","+r:r})),r(u())},o.onerror=n,o.withCredentials="include"==t.credentials,t.headers)o.setRequestHeader(c,t.headers[c]);o.send(t.body||null)}))}ve.Delete=xe,he.default(xe,me.Facade),xe.prototype.type=function(){return"delete"},function(e){var t=n&&n.__assign||function(){return(t=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.Delete=e.Screen=e.Page=e.Track=e.Identify=e.Facade=void 0;var r=i;Object.defineProperty(e,"Facade",{enumerable:!0,get:function(){return r.Facade}});var o=M;Object.defineProperty(e,"Identify",{enumerable:!0,get:function(){return o.Identify}});var a=J;Object.defineProperty(e,"Track",{enumerable:!0,get:function(){return a.Track}});var s=ee;Object.defineProperty(e,"Page",{enumerable:!0,get:function(){return s.Page}});var u=ue;Object.defineProperty(e,"Screen",{enumerable:!0,get:function(){return u.Screen}});var c=ve;Object.defineProperty(e,"Delete",{enumerable:!0,get:function(){return c.Delete}}),e.default=t(t({},r.Facade),{Identify:o.Identify,Track:a.Track,Page:s.Page,Screen:u.Screen,Delete:c.Delete})}(o);var be=ge;"undefined"!=typeof window&&(be=window.fetch||ge);function we(e){return e.startsWith("?")&&(e=e.substring(1)),(e=e.replace(/\?/g,"&")).split("&").reduce((function(e,t){var r=t.split("="),n=r[0],o=r[1],i=void 0===o?"":o;if(n.includes("utm_")&&n.length>4){var a=n.substr(4);"campaign"===a&&(a="name"),e[a]=function(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(t){return e}}(i)}return e}),{})}function _e(e,t,r,n){var o,i,a=e.user(),s=window.location.search;t.context=null!==(i=null!==(o=t.context)&&void 0!==o?o:t.options)&&void 0!==i?i:{};var u=t.context,c=t.anonymousId;delete t.options,t.writeKey=null==r?void 0:r.apiKey,u.userAgent=window.navigator.userAgent;var p=navigator.userLanguage||navigator.language;for(var l in void 0===u.locale&&void 0!==p&&(u.locale=p),u.library||(u.library={name:"analytics.js",version:"next-1.45.0"}),s&&!u.campaign&&(u.campaign=we(s)),t.userId=t.userId||a.id(),t.anonymousId=a.anonymousId(c),t.sentAt=new Date,n){n[l].bundlingStatus}return t}return function(n,i,a){var s,u,c=null!==(s=null==i?void 0:i.apiHost)&&void 0!==s?s:"api.segment.io/v1",p=(null!==(u=null==i?void 0:i.protocol)&&void 0!==u?u:"https")+"://"+c,l={dispatch:function(e,t){return be(e,{headers:{"Content-Type":"text/plain"},method:"post",body:JSON.stringify(t)})}};function f(e){return t(this,void 0,void 0,(function(){var t,s;return r(this,(function(r){var u,c,f;return t=e.event.type.charAt(0),s=(u=e.event,f=new o.Facade(u,c),"track"===u.type&&(f=new o.Track(u,c)),"identify"===u.type&&(f=new o.Identify(u,c)),"page"===u.type&&(f=new o.Page(u,c)),"alias"===u.type&&(f=new o.Alias(u,c)),"group"===u.type&&(f=new o.Group(u,c)),"screen"===u.type&&(f=new o.Screen(u,c)),Object.defineProperty(f,"obj",{value:u,writable:!0}),f).json(),"track"===e.event.type&&delete s.traits,[2,l.dispatch(p+"/"+t,_e(n,s,i,a)).then((function(){return e}))]}))}))}return{name:"Segment.io",type:"after",version:"0.1.0",isLoaded:function(){return!0},load:function(){var t=e({},n.settings.app),r={id:null==i?void 0:i.id,token:null==i?void 0:i.token,endpoint:null==i?void 0:i.endpoint};return console.log(t,r),Promise.resolve()},track:f,page:f}}}();