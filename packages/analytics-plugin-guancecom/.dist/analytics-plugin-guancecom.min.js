var AnalyticsPluginGuancecom=function(){"use strict";var e=function(){return(e=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function t(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{s(r.next(e))}catch(e){o(e)}}function u(e){try{s(r.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,u)}s((r=r.apply(e,t||[])).next())}))}function n(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}}var r=Array.prototype,i=Object.prototype,o=r.slice,a=i.toString,u=i.hasOwnProperty,s=r.forEach,c=Array.isArray,f=function(e,t,n){if(null===e)return!1;if(s&&e.forEach===s)e.forEach(t,n);else if(e.length===+e.length){for(var r=0,i=e.length;r<i;r++)if(r in e&&false===t.call(n,e[r],r,e))return!1}else for(var o in e)if(u.call(e,o)&&false===t.call(n,e[o],o,e))return!1};function d(e){return f(o.call(arguments,1),(function(t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})),e}function l(e){return d({},e)}var p=function(e){return f(o.call(arguments,1),(function(t){for(var n in t)void 0!==t[n]&&(e[n]=t[n])})),e},v=function(e){return f(o.call(arguments,1),(function(t){for(var n in t)void 0!==t[n]&&(S(t[n])&&S(e[n])?p(e[n],t[n]):e[n]=t[n])})),e},h=c||function(e){return"[object Array]"===a.call(e)},m=function(e){if(!e)return!1;try{return/^\s*\bfunction\b/.test(e)}catch(e){return!1}},g=function(e){return e?e.toArray?e.toArray():h(e)?o.call(e):(t=e)&&u.call(t,"callee")?o.call(e):y(e):[];var t},y=function(e){var t=[];return null===e||f(e,(function(e){t[t.length]=e})),t},b=function(e,t,n){if(e.filter)return e.filter(t);for(var r=[],i=0;i<e.length;i++)if(u.call(e,i)){var o=e[i];t.call(n,o,i,e)&&r.push(o)}return r},w=function(e,t,n){if(e.map)return e.map(t);for(var r=[],i=0;i<e.length;i++)if(u.call(e,i)){var o=e[i];r.push(t.call(n,o,i,e))}return r},_=function(e,t,n){if(e.some)return e.some(t);for(var r=!1,i=0;i<e.length;i++)if(u.call(e,i)){var o=e[i];if(t.call(n,o,i,e)){r=!0;break}}return r},S=function(e){return null!==e&&"[object Object]"===a.call(e)},x=function(e){if(S(e)){for(var t in e)if(u.call(e,t))return!1;return!0}return!1},C=function(e){var t=[];return f(e,(function(e,n){t.push([n,e])})),t},T=function(e){return"[object String]"===a.call(e)},E=function(e){return"[object Boolean]"===a.call(e)},O=function(e){return"[object Number]"===a.call(e)&&/[\d\.]+/.test(String(e))},k=function e(t){var n=t;try{n=e(t)}catch(e){n=t}return n},I=function(e,t,n){var r,i,o,a,u=0;n||(n={});var s=function(){u=!1===n.leading?0:(new Date).getTime(),r=null,a=e.apply(i,o),r||(i=o=null)},c=function(){o=arguments;var c=(new Date).getTime();u||!1!==n.leading||(u=c);var f=t-(c-u);return i=this,f<=0||f>t?(r&&(clearTimeout(r),r=null),u=c,a=e.apply(i,o),r||(i=o=null)):r||!1===n.trailing||(r=setTimeout(s,f)),a};return c.cancel=function(){clearTimeout(r),u=0,r=null},c},R=function(e){if("function"==typeof btoa)return btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,(function(e,t){return String.fromCharCode("0x"+t)})));var t,n,r,i,o,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",u=0,s=0,c="",f=[];if(!(e=String(e)))return e;e=function(e){var t,n,r,i,o="";for(t=n=0,r=(e=(e+"").replace(/\r\n/g,"\n").replace(/\r/g,"\n")).length,i=0;i<r;i++){var a=e.charCodeAt(i),u=null;a<128?n++:u=a>127&&a<2048?String.fromCharCode(a>>6|192,63&a|128):String.fromCharCode(a>>12|224,a>>6&63|128,63&a|128),null!==u&&(n>t&&(o+=e.substring(t,n)),o+=u,t=n=i+1)}return n>t&&(o+=e.substring(t,e.length)),o}(e);do{t=(o=e.charCodeAt(u++)<<16|e.charCodeAt(u++)<<8|e.charCodeAt(u++))>>18&63,n=o>>12&63,r=o>>6&63,i=63&o,f[s++]=a.charAt(t)+a.charAt(n)+a.charAt(r)+a.charAt(i)}while(u<e.length);switch(c=f.join(""),e.length%3){case 1:c=c.slice(0,-2)+"==";break;case 2:c=c.slice(0,-1)+"="}return c};function A(e){return e?(parseInt(e,10)^16*Math.random()>>parseInt(e,10)/4).toString(16):"".concat(1e7,"-",1e3,"-",4e3,"-",8e3,"-",1e11).replace(/[018]/g,A)}function M(e){var t="";return e&&(t=e.replace(/\/([^\/]*)\d([^\/]*)/g,"/?").replace(/\/$/g,"")),t||"/"}var B=function(e){var t=function(e){this._fields={Username:4,Password:5,Port:7,Protocol:2,Host:6,Path:8,URL:0,QueryString:9,Fragment:10},this._values={},this._regex=null,this._regex=/^((\w+):\/\/)?((\w+):?(\w+)?@)?([^\/\?:]+):?(\d+)?(\/?[^\?#]+)?\??([^#]+)?#?(\w*)/,void 0!==e&&this._parse(e)};return t.prototype.setUrl=function(e){this._parse(e)},t.prototype._initValues=function(){for(var e in this._fields)this._values[e]=""},t.prototype.addQueryString=function(e){if("object"!=typeof e)return!1;var t=this._values.QueryString||"";for(var n in e)t=new RegExp(n+"[^&]+").test(t)?t.replace(new RegExp(n+"[^&]+"),n+"="+e[n]):"&"===t.slice(-1)?t+n+"="+e[n]:""===t?n+"="+e[n]:t+"&"+n+"="+e[n];this._values.QueryString=t},t.prototype.getParse=function(){return this._values},t.prototype.getUrl=function(){var e="";return e+=this._values.Origin,e+=this._values.Path,e+=this._values.QueryString?"?"+this._values.QueryString:""},t.prototype._parse=function(e){this._initValues();var t=this._regex.exec(e);if(!t)throw"DPURLParser::_parse -> Invalid URL";for(var n in this._fields)void 0!==t[this._fields[n]]&&(this._values[n]=t[this._fields[n]]);this._values.Path=this._values.Path||"/",this._values.Hostname=this._values.Host.replace(/:\d+$/,""),this._values.Origin=this._values.Protocol+"://"+this._values.Hostname+(this._values.Port?":"+this._values.Port:"")},new t(e)};var U=function(e){var t={},n=e.split("?")[1]||"";return n&&(t=L("?"+n)),t},L=function(e){for(var t=function(e){return k(e)},n={},r=(e=e||"").substring(1).split("&"),i=0;i<r.length;i++){var o=r[i].indexOf("=");if(-1!==o){var a=r[i].substring(0,o),u=r[i].substring(o+1);a=t(a),u=t(u),n[a]=u}}return n};function $(e,t,n){if(void 0===n&&(n=function(){if("undefined"!=typeof WeakSet){var e=new WeakSet;return{hasAlreadyBeenSeen(t){var n=e.has(t);return n||e.add(t),n}}}var t=[];return{hasAlreadyBeenSeen(e){var n=t.indexOf(e)>=0;return n||t.push(e),n}}}()),void 0===t)return e;if("object"!=typeof t||null===t)return t;if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp){var r=t.flags||[t.global?"g":"",t.ignoreCase?"i":"",t.multiline?"m":"",t.sticky?"y":"",t.unicode?"u":""].join("");return new RegExp(t.source,r)}if(!n.hasAlreadyBeenSeen(t)){if(Array.isArray(t)){for(var i=Array.isArray(e)?e:[],o=0;o<t.length;++o)i[o]=$(i[o],t[o],n);return i}var a;i="object"==(null===(a=e)?"null":Array.isArray(a)?"array":typeof a)?e:{};for(var u in t)Object.prototype.hasOwnProperty.call(t,u)&&(i[u]=$(i[u],t[u],n));return i}}function P(e){return $(void 0,e)}function D(e){return e?String(e).substr(0,1)+String(e).substr(1).replace(/\d*/g,"x"):e}function F(e,t,n){if(null==e)return JSON.stringify(e);var r=[!1,void 0];N(e)&&(r=[!0,e.toJSON],delete e.toJSON);var i,o,a=[!1,void 0];"object"==typeof e&&N(i=Object.getPrototypeOf(e))&&(a=[!0,i.toJSON],delete i.toJSON);try{o=JSON.stringify(e,void 0,n)}catch(e){o="<error: unable to serialize object>"}finally{r[0]&&(e.toJSON=r[1]),a[0]&&(i.toJSON=a[1])}return o}function N(e){return"object"==typeof e&&null!==e&&e.hasOwnProperty("toJSON")}function j(){}var q,V=1e3,Q=6e4;function W(e){return 0!==e&&100*Math.random()<=e}function G(e,t){return+e.toFixed(t)}function H(e){return"number"!=typeof e?e:G(1e6*e,0)}function X(e){return O(e)?G(1e6*e,0):e}function z(e){return e-ie()}function K(){return performance.now()}function J(){return{relative:K(),timeStamp:Y()}}function Y(){return Z()}function Z(){return(new Date).getTime()}function ee(e,t){return t-e}function te(){return{relative:0,timeStamp:ie()}}function ne(e){return{relative:e,timeStamp:re(e)}}function re(e){var t=Z()-performance.now();return t>ie()?Math.round(t+e):function(e){return Math.round(ie()+e)}(e)}function ie(){return void 0===q&&(q=performance.timing.navigationStart),q}function oe(e,t){for(var n=t.split(".");n.length;){var r=n.shift();if(!(e&&r in e&&u.call(e,r)))return;e=e[r]}return e}function ae(e,t){var n=e.charCodeAt(t-1);return n>=55296&&n<=56319?e.slice(0,t+1):e.slice(0,t)}function ue(e,t,n,r){return se(e,[t],n,r)}function se(e,t,n,r){var i=r&&r.once?function(e){o(),n(e)}:n;r=r&&r.passive?{capture:r.capture,passive:r.passive}:r&&r.capture,f(t,(function(t){e.addEventListener(t,i,r)}));var o=function(){f(t,(function(t){e.removeEventListener(t,i,r)}))};return{stop:o}}function ce(e,t){return-1!==e.indexOf(t)}function fe(){var e={};return{get:function(){return e},add:function(t,n){T(t)?e[t]=n:console.error("key 需要传递字符串类型")},remove:function(t){delete e[t]},set:function(t){S(t)?e=t:console.error("content 需要传递对象类型数据")},getContext:function(){return P(e)},setContext:function(t){e=P(t)},setContextProperty:function(t,n){e[t]=P(n)},removeContextProperty:function(t){delete e[t]},clearContext:function(){e={}}}}function de(e,t){for(var n=0;n<e.length;n+=1){var r=e[n];if(t(r,n,e))return r}}function le(e){return O(e)&&e>=0&&e<=100}function pe(e){if(e.origin)return e.origin;var t=e.host.replace(/(:80|:443)$/,"");return e.protocol+"//"+t}function ve(e){var t={};return f(e,(function(e,n){var r;t[(r=n,r.replace(/[A-Z]/g,(function(e,t){return(0!==t?"_":"")+e.toLowerCase()})).replace(/-/g,"_"))]=he(e)})),t}function he(e){return h(e)?w(e,(function(e){return he(e)})):"object"==typeof e&&null!==e?ve(e):e}function me(e){if("object"==typeof e&&e)e=F(e);else if(!T(e))return e;return String(e).replace(/[\s=,"]/g,(function(e){return"\\"+e}))}function ge(e){return'"'+e.replace(/[\\]*"/g,'"').replace(/"/g,'\\"')+'"'}function ye(e){return"object"==typeof e&&e?ge(F(e)):T(e)?ge(e):e}function be(e,t){return null!=e?e:t}var we=function(){this.buffer=[]};we.prototype={add:function(e){this.buffer.push(e)>this.limit&&this.buffer.splice(0,1)},drain:function(e){f(this.buffer,(function(t){e(t)})),this.buffer.length=0}};var _e=we,Se=1/0;function xe(e){this.expireDelay=e,this.entries=[];var t=this;this.clearOldContextsInterval=setInterval((function(){t.clearOldContexts()}),6e4)}xe.prototype.add=function(e,t){var n=this,r={context:e,startTime:t,endTime:Se,remove:function(){var e=n.entries.indexOf(r);e>=0&&n.entries.splice(e,1)},close:function(e){r.endTime=e}};return this.entries.unshift(r),r},xe.prototype.find=function(e){for(var t of(void 0===e&&(e=Se),this.entries))if(t.startTime<=e){if(e<=t.endTime)return t.context;break}},xe.prototype.closeActive=function(e){var t=this.entries[0];t&&t.endTime===Se&&t.close(e)},xe.prototype.findAll=function(e){void 0===e&&(e=Se);var t=b(this.entries,(function(t){return t.startTime<=e&&e<=t.endTime}));return w(t,(function(e){return e.context}))},xe.prototype.reset=function(){this.entries=[]},xe.prototype.stop=function(){clearInterval(this.clearOldContextsInterval)},xe.prototype.clearOldContexts=function(){for(var e=K()-this.expireDelay;this.entries.length>0&&this.entries[this.entries.length-1].endTime<e;)this.entries.pop()};var Ce={log:"log",debug:"debug",info:"info",warn:"warn",error:"error"},Te=function e(t){var n=[].slice.call(arguments,1);Object.prototype.hasOwnProperty.call(Ce,t)||(t=Ce.log),e[t].apply(e,n)};Te.debug=console.debug.bind(console),Te.log=console.log.bind(console),Te.info=console.info.bind(console),Te.warn=console.warn.bind(console),Te.error=console.error.bind(console);var Ee={navigator:void 0!==window.navigator?window.navigator:{},infoMap:{engine:["WebKit","Trident","Gecko","Presto"],browser:["Safari","Chrome","Edge","IE","IE 11","IE 10","IE 9","IE 8","IE 7","Firefox","Firefox Focus","Chromium","Opera","Vivaldi","Yandex","Arora","Lunascape","QupZilla","Coc Coc","Kindle","Iceweasel","Konqueror","Iceape","SeaMonkey","Epiphany","360","360SE","360EE","UC","QQBrowser","QQ","Baidu","Maxthon","Sogou","LBBROWSER","2345Explorer","TheWorld","XiaoMi","Quark","Qiyu","Wechat",,"WechatWork","Taobao","Alipay","Weibo","Douban","Suning","iQiYi"],os:["Windows","Linux","Mac OS","Android","Ubuntu","FreeBSD","Debian","iOS","Windows Phone","BlackBerry","MeeGo","Symbian","Chrome OS","WebOS"],device:["Mobile","Tablet","iPad"]}},Oe={getMatchMap:function(e){return{Trident:e.indexOf("Trident")>-1||e.indexOf("NET CLR")>-1,Presto:e.indexOf("Presto")>-1,WebKit:e.indexOf("AppleWebKit")>-1,Gecko:e.indexOf("Gecko/")>-1,Safari:e.indexOf("Safari")>-1,Chrome:e.indexOf("Chrome")>-1||e.indexOf("CriOS")>-1,IE:e.indexOf("MSIE")>-1||e.indexOf("Trident")>-1,Edge:e.indexOf("Edge")>-1,Firefox:e.indexOf("Firefox")>-1||e.indexOf("FxiOS")>-1,"Firefox Focus":e.indexOf("Focus")>-1,Chromium:e.indexOf("Chromium")>-1,Opera:e.indexOf("Opera")>-1||e.indexOf("OPR")>-1,Vivaldi:e.indexOf("Vivaldi")>-1,Yandex:e.indexOf("YaBrowser")>-1,Arora:e.indexOf("Arora")>-1,Lunascape:e.indexOf("Lunascape")>-1,QupZilla:e.indexOf("QupZilla")>-1,"Coc Coc":e.indexOf("coc_coc_browser")>-1,Kindle:e.indexOf("Kindle")>-1||e.indexOf("Silk/")>-1,Iceweasel:e.indexOf("Iceweasel")>-1,Konqueror:e.indexOf("Konqueror")>-1,Iceape:e.indexOf("Iceape")>-1,SeaMonkey:e.indexOf("SeaMonkey")>-1,Epiphany:e.indexOf("Epiphany")>-1,360:e.indexOf("QihooBrowser")>-1||e.indexOf("QHBrowser")>-1,"360EE":e.indexOf("360EE")>-1,"360SE":e.indexOf("360SE")>-1,UC:e.indexOf("UC")>-1||e.indexOf(" UBrowser")>-1,QQBrowser:e.indexOf("QQBrowser")>-1,QQ:e.indexOf("QQ/")>-1,Baidu:e.indexOf("Baidu")>-1||e.indexOf("BIDUBrowser")>-1,Maxthon:e.indexOf("Maxthon")>-1,Sogou:e.indexOf("MetaSr")>-1||e.indexOf("Sogou")>-1,LBBROWSER:e.indexOf("LBBROWSER")>-1,"2345Explorer":e.indexOf("2345Explorer")>-1,TheWorld:e.indexOf("TheWorld")>-1,XiaoMi:e.indexOf("MiuiBrowser")>-1,Quark:e.indexOf("Quark")>-1,Qiyu:e.indexOf("Qiyu")>-1,Wechat:e.indexOf("MicroMessenger")>-1,Taobao:e.indexOf("AliApp(TB")>-1,Alipay:e.indexOf("AliApp(AP")>-1,Weibo:e.indexOf("Weibo")>-1,Douban:e.indexOf("com.douban.frodo")>-1,Suning:e.indexOf("SNEBUY-APP")>-1,iQiYi:e.indexOf("IqiyiApp")>-1,Windows:e.indexOf("Windows")>-1,Linux:e.indexOf("Linux")>-1||e.indexOf("X11")>-1,"Mac OS":e.indexOf("Macintosh")>-1,Android:e.indexOf("Android")>-1||e.indexOf("Adr")>-1,Ubuntu:e.indexOf("Ubuntu")>-1,FreeBSD:e.indexOf("FreeBSD")>-1,Debian:e.indexOf("Debian")>-1,"Windows Phone":e.indexOf("IEMobile")>-1||e.indexOf("Windows Phone")>-1,BlackBerry:e.indexOf("BlackBerry")>-1||e.indexOf("RIM")>-1,MeeGo:e.indexOf("MeeGo")>-1,Symbian:e.indexOf("Symbian")>-1,iOS:e.indexOf("like Mac OS X")>-1,"Chrome OS":e.indexOf("CrOS")>-1,WebOS:e.indexOf("hpwOS")>-1,Mobile:e.indexOf("Mobi")>-1||e.indexOf("iPh")>-1||e.indexOf("480")>-1,Tablet:e.indexOf("Tablet")>-1||e.indexOf("Nexus 7")>-1,iPad:e.indexOf("iPad")>-1}},matchInfoMap:function(e){var t=Ee.navigator.userAgent||{},n=Oe.getMatchMap(t);for(var r in Ee.infoMap)for(var i=0;i<Ee.infoMap[r].length;i++){var o=Ee.infoMap[r][i];n[o]&&(e[r]=o)}},getOS:function(){return Oe.matchInfoMap(this),this.os||"Unknown"},getOSVersion:function(){var e=this,t=Ee.navigator.userAgent||{};e.osVersion="",e.osMajor="";var n={Windows:function(){var e=t.replace(/^.*Windows NT ([\d.]+);.*$/,"$1");return{6.4:"10",6.3:"8.1",6.2:"8",6.1:"7","6.0":"Vista",5.2:"XP",5.1:"XP","5.0":"2000"}[e]||e},Android:function(){return t.replace(/^.*Android ([\d.]+);.*$/,"$1")},iOS:function(){return t.replace(/^.*OS ([\d_]+) like.*$/,"$1").replace(/_/g,".")},Debian:function(){return t.replace(/^.*Debian\/([\d.]+).*$/,"$1")},"Windows Phone":function(){return t.replace(/^.*Windows Phone( OS)? ([\d.]+);.*$/,"$2")},"Mac OS":function(){return t.replace(/^.*Mac OS X ([\d_]+).*$/,"$1").replace(/_/g,".")},WebOS:function(){return t.replace(/^.*hpwOS\/([\d.]+);.*$/,"$1")}};return n[e.os]&&(e.osVersion=n[e.os](),e.osVersion===t&&(e.osVersion="")),e.osVersion&&(e.osMajor=e.osVersion.split(".").length&&e.osVersion.split(".")[0]),{version:e.osVersion,osMajor:e.osMajor}},getOrientationStatu:function(){return window.matchMedia("(orientation: portrait)").matches?"竖屏":"横屏"},getDeviceType:function(){var e=this;return e.device="PC",Oe.matchInfoMap(e),e.device},getNetwork:function(){return navigator&&navigator.connection&&navigator.connection.effectiveType},getLanguage:function(){var e;return this.language=((e=(Ee.navigator.browserLanguage||Ee.navigator.language).split("-"))[1]&&(e[1]=e[1].toUpperCase()),e.join("_")),this.language},getBrowserInfo:function(){var e=this;Oe.matchInfoMap(e);var t=Ee.navigator.userAgent||{},n=function(e,t){var n=Ee.navigator.mimeTypes;for(var r in n)if(n[r][e]==t)return!0;return!1},r=Oe.getMatchMap(t),i=!1;if(window.chrome){var o=t.replace(/^.*Chrome\/([\d]+).*$/,"$1");o>36&&window.showModalDialog?i=!0:o>45&&(i=n("type","application/vnd.chromium.remoting-viewer"))}if(r.Baidu&&r.Opera&&(r.Baidu=!1),r.Mobile&&(r.Mobile=!(t.indexOf("iPad")>-1)),i&&(n("type","application/gameplugin")||Ee.navigator&&void 0===Ee.navigator.connection.saveData?r["360SE"]=!0:r["360EE"]=!0),r.IE||r.Edge)switch(window.screenTop-window.screenY){case 71:case 74:case 99:break;case 102:r["360EE"]=!0;break;case 75:case 74:case 105:break;case 104:r["360SE"]=!0}var a={Safari:function(){return t.replace(/^.*Version\/([\d.]+).*$/,"$1")},Chrome:function(){return t.replace(/^.*Chrome\/([\d.]+).*$/,"$1").replace(/^.*CriOS\/([\d.]+).*$/,"$1")},IE:function(){return t.replace(/^.*MSIE ([\d.]+).*$/,"$1").replace(/^.*rv:([\d.]+).*$/,"$1")},Edge:function(){return t.replace(/^.*Edge\/([\d.]+).*$/,"$1")},Firefox:function(){return t.replace(/^.*Firefox\/([\d.]+).*$/,"$1").replace(/^.*FxiOS\/([\d.]+).*$/,"$1")},"Firefox Focus":function(){return t.replace(/^.*Focus\/([\d.]+).*$/,"$1")},Chromium:function(){return t.replace(/^.*Chromium\/([\d.]+).*$/,"$1")},Opera:function(){return t.replace(/^.*Opera\/([\d.]+).*$/,"$1").replace(/^.*OPR\/([\d.]+).*$/,"$1")},Vivaldi:function(){return t.replace(/^.*Vivaldi\/([\d.]+).*$/,"$1")},Yandex:function(){return t.replace(/^.*YaBrowser\/([\d.]+).*$/,"$1")},Arora:function(){return t.replace(/^.*Arora\/([\d.]+).*$/,"$1")},Lunascape:function(){return t.replace(/^.*Lunascape[\/\s]([\d.]+).*$/,"$1")},QupZilla:function(){return t.replace(/^.*QupZilla[\/\s]([\d.]+).*$/,"$1")},"Coc Coc":function(){return t.replace(/^.*coc_coc_browser\/([\d.]+).*$/,"$1")},Kindle:function(){return t.replace(/^.*Version\/([\d.]+).*$/,"$1")},Iceweasel:function(){return t.replace(/^.*Iceweasel\/([\d.]+).*$/,"$1")},Konqueror:function(){return t.replace(/^.*Konqueror\/([\d.]+).*$/,"$1")},Iceape:function(){return t.replace(/^.*Iceape\/([\d.]+).*$/,"$1")},SeaMonkey:function(){return t.replace(/^.*SeaMonkey\/([\d.]+).*$/,"$1")},Epiphany:function(){return t.replace(/^.*Epiphany\/([\d.]+).*$/,"$1")},360:function(){return t.replace(/^.*QihooBrowser\/([\d.]+).*$/,"$1")},"360SE":function(){return{63:"10.0",55:"9.1",45:"8.1",42:"8.0",31:"7.0",21:"6.3"}[t.replace(/^.*Chrome\/([\d]+).*$/,"$1")]||""},"360EE":function(){return{69:"11.0",63:"9.5",55:"9.0",50:"8.7",30:"7.5"}[t.replace(/^.*Chrome\/([\d]+).*$/,"$1")]||""},Maxthon:function(){return t.replace(/^.*Maxthon\/([\d.]+).*$/,"$1")},QQBrowser:function(){return t.replace(/^.*QQBrowser\/([\d.]+).*$/,"$1")},QQ:function(){return t.replace(/^.*QQ\/([\d.]+).*$/,"$1")},Baidu:function(){return t.replace(/^.*BIDUBrowser[\s\/]([\d.]+).*$/,"$1")},UC:function(){return t.replace(/^.*UC?Browser\/([\d.]+).*$/,"$1")},Sogou:function(){return t.replace(/^.*SE ([\d.X]+).*$/,"$1").replace(/^.*SogouMobileBrowser\/([\d.]+).*$/,"$1")},LBBROWSER:function(){var e="";t.indexOf("LieBaoFast")>-1&&(e=t.replace(/^.*LieBaoFast\/([\d.]+).*$/,"$1"));var n=t.replace(/^.*Chrome\/([\d]+).*$/,"$1");return e||{57:"6.5",49:"6.0",46:"5.9",42:"5.3",39:"5.2",34:"5.0",29:"4.5",21:"4.0"}[n]||""},"2345Explorer":function(){return t.replace(/^.*2345Explorer\/([\d.]+).*$/,"$1")},TheWorld:function(){return t.replace(/^.*TheWorld ([\d.]+).*$/,"$1")},XiaoMi:function(){return t.replace(/^.*MiuiBrowser\/([\d.]+).*$/,"$1")},Quark:function(){return t.replace(/^.*Quark\/([\d.]+).*$/,"$1")},Qiyu:function(){return t.replace(/^.*Qiyu\/([\d.]+).*$/,"$1")},Wechat:function(){return t.replace(/^.*MicroMessenger\/([\d.]+).*$/,"$1")},WechatWork:function(){return t.replace(/^.*wxwork\/([\d.]+).*$/,"$1")},Taobao:function(){return t.replace(/^.*AliApp\(TB\/([\d.]+).*$/,"$1")},Alipay:function(){return t.replace(/^.*AliApp\(AP\/([\d.]+).*$/,"$1")},Weibo:function(){return t.replace(/^.*weibo__([\d.]+).*$/,"$1")},Douban:function(){return t.replace(/^.*com.douban.frodo\/([\d.]+).*$/,"$1")},Suning:function(){return t.replace(/^.*SNEBUY-APP([\d.]+).*$/,"$1")},iQiYi:function(){return t.replace(/^.*IqiyiVersion\/([\d.]+).*$/,"$1")}};return e.browserVersion="",e.browserMajor="",a[e.browser]&&(e.browserVersion=a[e.browser](),e.browserVersion==t&&(e.browserVersion="")),"Chrome"==e.browser&&t.match(/\S+Browser/)&&(e.browser=t.match(/\S+Browser/)[0],e.version=t.replace(/^.*Browser\/([\d.]+).*$/,"$1")),"Edge"==e.browser&&(e.version>"75"?e.engine="Blink":e.engine="EdgeHTML"),("Chrome"==e.browser&&parseInt(e.browserVersion)>27||r.Chrome&&"WebKit"==e.engine&&parseInt(e.browserVersion)>27||"Opera"==e.browser&&parseInt(e.version)>12||"Yandex"==e.browser)&&(e.engine="Blink"),e.browserVersion&&(e.browserMajor=e.browserVersion.split(".").length&&this.browserVersion.split(".")[0]),{browser:e.browser,browserVersion:e.browserVersion,engine:e.engine,browserMajor:e.browserMajor}},getGeoPostion:function(e){navigator&&navigator.geolocation&&navigator.geolocation.getCurrentPosition((function(t){e(t)}),(function(e){Te.warn(e)}))}},ke={os:Oe.getOS(),osVersion:Oe.getOSVersion().version,osVersionMajor:Oe.getOSVersion().osMajor,browser:Oe.getBrowserInfo().browser,browserVersion:Oe.getBrowserInfo().browserVersion,browserVersionMajor:Oe.getBrowserInfo().browserMajor,screenSize:window.screen.width+"*"+window.screen.height,networkType:Oe.getNetwork(),divice:Oe.getDeviceType()},Ie="beforeunload",Re="click",Ae="keydown",Me="load",Be="popstate",Ue="scroll",Le="touchstart",$e="visibilitychange",Pe="DOMContentLoaded",De="pointerdown",Fe="pointerup",Ne="pointercancel",je="hashchange",qe="pagehide",Ve="mousedown",Qe="input",We="securitypolicyviolation",Ge="selectionchange",He="document",Xe="xhr",ze="beacon",Ke="fetch",Je="css",Ye="js",Ze="image",et="font",tt="media",nt="other",rt="click",it="custom",ot="rage_click",at="error_click",ut="dead_click",st={ACTION:"action",ERROR:"error",LONG_TASK:"long_task",VIEW:"view",RESOURCE:"resource",LOGGER:"logger"},ct="initial_load",ft="route_change",dt={FETCH:Ke,XHR:Xe},lt="ddtrace",pt="zipkin",vt="zipkin_single_header",ht="w3c_traceparent",mt="skywalking_v3",gt="jaeger",yt="handled",bt="unhandled";function wt(e,t,n){var r=e[t],i=n(r),o=function(){if("function"==typeof i)return i.apply(this,arguments)};return e[t]=o,{stop:function(){e[t]===o?e[t]=r:i=r}}}function _t(e,t,n){return wt(e,t,(function(e){return function(){var t;return n&&n.before&&n.before.apply(this,arguments),"function"==typeof e&&(t=e.apply(this,arguments)),n&&n.after&&n.after.apply(this,arguments),t}}))}var St="?";function xt(e){var t=[],n=At(e,"stack");return n&&f(n.split("\n"),(function(e){var n=function(e){var t=Tt.exec(e);if(!t)return;var n=t[2]&&0===t[2].indexOf("native"),r=t[2]&&0===t[2].indexOf("eval"),i=Et.exec(t[2]);r&&i&&(t[2]=i[1],t[3]=i[2],t[4]=i[3]);return{args:n?[t[2]]:[],column:t[4]?+t[4]:void 0,func:t[1]||St,line:t[3]?+t[3]:void 0,url:n?void 0:t[2]}}(e)||function(e){var t=Ot.exec(e);if(!t)return;return{args:[],column:t[3]?+t[3]:void 0,func:St,line:t[2]?+t[2]:void 0,url:t[1]}}(e)||function(e){var t=kt.exec(e);if(!t)return;return{args:[],column:t[4]?+t[4]:void 0,func:t[1]||St,line:+t[3],url:t[2]}}(e)||function(e){var t=It.exec(e);if(!t)return;var n=t[3]&&t[3].indexOf(" > eval")>-1,r=Rt.exec(t[3]);n&&r&&(t[3]=r[1],t[4]=r[2],t[5]=void 0);return{args:t[2]?t[2].split(","):[],column:t[5]?+t[5]:void 0,func:t[1]||St,line:t[4]?+t[4]:void 0,url:t[3]}}(e);n&&(!n.func&&n.line&&(n.func=St),t.push(n))})),{message:At(e,"message"),name:At(e,"name"),stack:t}}var Ct="((?:file|https?|blob|chrome-extension|native|eval|webpack|<anonymous>|\\w+\\.|\\/).*?)",Tt=new RegExp("^\\s*at (.*?) ?\\("+Ct+"(?::(\\d+))?"+"(?::(\\d+))?\\)?\\s*$","i"),Et=new RegExp("\\((\\S*)(?::(\\d+))(?::(\\d+))\\)");var Ot=new RegExp("^\\s*at ?"+Ct+"(?::(\\d+))?"+"(?::(\\d+))??\\s*$","i");var kt=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i;var It=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|resource|capacitor|\[native).*?|[^@]*bundle)(?::(\d+))?(?::(\d+))?\s*$/i,Rt=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i;function At(e,t){if("object"==typeof e&&e&&t in e){var n=e[t];return"string"==typeof n?n:void 0}}var Mt=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/;function Bt(e){var t=function(e){return _t(window,"onerror",{before:function(t,n,r,i,o){var a;if(o)a=xt(o),e(a,o);else{var u,s={url:n,column:i,line:r},c=t;if("[object String]"==={}.toString.call(t)){var f=Mt.exec(c);f&&(u=f[1],c=f[2])}e(a={name:u,message:"string"==typeof c?c:void 0,stack:[s]},t)}}})}(e),n=function(e){return _t(window,"onunhandledrejection",{before:function(t){var n=t.reason||"Empty reason",r=xt(n);e(r,n)}})}(e);return{stop:function(){t.stop(),n.stop()}}}var Ut={AGENT:"agent",CONSOLE:"console",NETWORK:"network",SOURCE:"source",LOGGER:"logger",CUSTOM:"custom"};function Lt(e){var t=e.stackTrace,n=e.originalError,r=e.handlingStack,i=e.startClocks,o=e.nonErrorPrefix,a=e.source,u=e.handling;return t&&(void 0!==t.message||n instanceof Error)?{startClocks:i,source:a,handling:u,originalError:n,message:t.message||"Empty message",stack:Pt(t),handlingStack:r,type:t.name,causes:Ft(n,a)}:{startClocks:i,source:a,handling:u,originalError:n,message:o+" "+F(n),stack:"No stack, consider using an instance of Error",handlingStack:r,type:t&&t.name}}function $t(){var e=new Error;if(!e.stack)try{throw e}catch(e){}var t=xt(e);return t.stack=t.stack.slice(2),Pt(t)}function Pt(e){var t=Dt(e);return f(e.stack,(function(e){var n="?"===e.func?"<anonymous>":e.func,r=e.args&&e.args.length>0?"("+e.args.join(", ")+")":"",i=e.line?":"+e.line:"",o=e.line&&e.column?":"+e.column:"";t+="\n  at "+n+r+" @ "+e.url+i+o})),t}function Dt(e){return(e.name||"Error")+": "+e.message}function Ft(e,t){for(var n=e,r=[];n&&n.cause instanceof Error&&r.length<10;){var i=xt(n.cause);r.push({message:n.cause.message,source:t,type:i&&i.name,stack:i&&Pt(i)}),n=n.cause}return r.length?r:void 0}var Nt=function(e){this.observers=[],this.onLastUnsubscribe=void 0,this.onFirstSubscribe=e};Nt.prototype={subscribe:function(e){!this.observers.length&&this.onFirstSubscribe&&(this.onLastUnsubscribe=this.onFirstSubscribe()||void 0),this.observers.push(e);var t=this;return{unsubscribe:function(){t.observers=b(t.observers,(function(t){return e!==t})),!t.observers.length&&t.onLastUnsubscribe&&t.onLastUnsubscribe()}}},notify:function(e){f(this.observers,(function(t){t(e)}))}};var jt=Nt;function qt(){var e=[].slice.call(arguments),t=new jt((function(){var n=w(e,(function(e){return e.subscribe((function(e){return t.notify(e)}))}));return function(){return f(n,(function(e){return e.unsubscribe()}))}}));return t}var Vt={};function Qt(e){var t=w(e,(function(e){return Vt[e]||(Vt[e]=function(e){var t=new jt((function(){var n=console[e];return console[e]=function(){var r=[].slice.call(arguments);n.apply(console,arguments);var i=$t();t.notify(Wt(r,e,i))},function(){console[e]=n}}));return t}(e)),Vt[e]}));return qt.apply(this,t)}function Wt(e,t,n){var r,i=w(e,(function(e){return function(e){if("string"==typeof e)return e;if(e instanceof Error)return Dt(xt(e));return F(e,0,2)}(e)})).join(" ");if(t===Ce.error){var o=de(e,(function(e){return e instanceof Error}));r=o?Pt(xt(o)):void 0,i="console error: "+i}return{api:t,message:i,stack:r,handlingStack:n}}var Gt="intervention",Ht="csp_violation";function Xt(e){var t,n=[];ce(e,Ht)&&n.push(t=new jt((function(){return ue(document,We,(function(e){t.notify(function(e){var t=Ht,n="'"+e.blockedURI+"' blocked by '"+e.effectiveDirective+"' directive";return{type:Ht,subtype:e.effectiveDirective,message:t+": "+n,stack:zt(e.effectiveDirective,n+' of the policy "'+ae(e.originalPolicy,100)+'"',e.sourceFile,e.lineNumber,e.columnNumber)}}(e))})).stop})));var r=b(e,(function(e){return e!==Ht}));return r.length&&n.push(function(e){var t=new jt((function(){if(window.ReportingObserver){var n=function(e){f(e,(function(e){t.notify(function(e){var t=e.body,n=e.type;return{type:n,subtype:t.id,message:n+": "+t.message,stack:zt(t.id,t.message,t.sourceFile,t.lineNumber,t.columnNumber)}}(e))}))},r=new window.ReportingObserver(n,{types:e,buffered:!0});return r.observe(),function(){r.disconnect()}}}));return t}(r)),qt.apply(this,n)}function zt(e,t,n,r,i){return n&&Pt({name:e,message:t,stack:[{func:"?",url:n,line:r,column:i}]})}var Kt,Jt="PERFORMANCE_ENTRIES_COLLECTED",Yt="AUTO_ACTION_COMPLETED",Zt="VIEW_CREATED",en="VIEW_UPDATED",tn="VIEW_ENDED",nn="SESSION_RENEWED",rn="SESSION_EXPIRED",on="BEFORE_UNLOAD",an="REQUEST_STARTED",un="REQUEST_COMPLETED",sn="RAW_RUM_EVENT_COLLECTED",cn="RUM_EVENT_COLLECTED",fn="RAW_ERROR_COLLECTED";function dn(){this.callbacks=[]}function ln(e,t,n){var r=v({},e),i=n(r);return f(t,(function(t){var n=pn(e,t),i=pn(r,t);"string"==typeof n&&"string"==typeof i&&function(e,t,n){for(var r=e,i=t.split("."),o=0;o<i.length;o+=1){var a=i[o];if(!vn(r,a))return;o!==i.length-1?r=r[a]:r[a]=n}}(e,t,i)})),i}function pn(e,t){var n=e;for(var r of t.split(".")){if(!vn(n,r))return;n=n[r]}return n}function vn(e,t){return"object"==typeof e&&null!==e&&t in e}function hn(e,t,n){var r=0,i=!1;return{isLimitReached:function(){if(0===r&&setTimeout((function(){r=0}),Q),(r+=1)<=t||i)return i=!1,!1;if(r===t+1){i=!0;try{n({message:"Reached max number of "+e+"s by minute: "+t,source:Ut.AGENT,startClocks:J()})}finally{i=!1}}return!0}}}function mn(e){return gn(e,pe(window.location)).href}function gn(e,t){if(function(){if(void 0!==Kt)return Kt;try{var e=new URL("http://test/path");return Kt="http://test/path"===e.href}catch(e){Kt=!1}return Kt}())return void 0!==t?new URL(e,t):new URL(e);if(void 0===t&&!/:/.test(e))throw new Error("Invalid URL: "+e);var n=document,r=n.createElement("a");if(void 0!==t){var i=(n=document.implementation.createHTMLDocument("")).createElement("base");i.href=t,n.head.appendChild(i),n.body.appendChild(r)}return r.href=e,r}dn.prototype={notify:function(e,t){var n=this.callbacks[e];n&&f(n,(function(e){e(t)}))},subscribe:function(e,t){this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t);var n=this;return{unsubscribe:function(){n.callbacks[e]=b(n.callbacks[e],(function(e){return e!==t}))}}}};var yn=navigator.userAgent.toLowerCase(),bn=function(){return/iphone os/.test(yn)};var wn;function _n(e,t,n,r){var i=new Date;i.setTime(i.getTime()+n);var o="expires="+i.toUTCString(),a=r&&r.crossSite?"none":"strict",u=r&&r.domain?";domain="+r.domain:"",s=r&&r.secure?";secure":"";document.cookie=e+"="+t+";"+o+";path=/;samesite="+a+u+s}function Sn(e){return function(e,t){var n=e.match("(?:^|;)\\s*"+t+"\\s*=\\s*([^;]+)");return n?n[1]:void 0}(document.cookie,e)}var xn,Cn,Tn=/^\s+|\s+$/g;function En(e){return e.replace(Tn,"")}function On(e){return e.lastIndexOf("/")===e.length-1?En(e)+"v1/write/logging":En(e)+"/v1/write/logging"}function kn(e){var t,n;if(void 0===e.sampleRate||le(e.sampleRate))return d({beforeSend:e.beforeSend&&(t=e.beforeSend,n="beforeSend threw an error:",function(){var e=[].slice.call(arguments);try{return t.apply(this,e)}catch(e){Te.error(n,e)}}),cookieOptions:In(e),sampleRate:be(e.sampleRate,100),service:e.service,version:e.version,env:e.env,silentMultipleInit:!!e.silentMultipleInit,batchBytesLimit:16384,eventRateLimiterThreshold:3e3,flushTimeout:3e4,batchMessagesLimit:50,messageBytesLimit:262144},function(e){var t=function(e){return!1};"isIntakeUrl"in e&&m(e.isIntakeUrl)&&E(e.isIntakeUrl())&&(t=e.isIntakeUrl);var n,r=function(e){return!1};return"isServerError"in e&&m(e.isServerError)&&E(e.isServerError())&&(r=e.isServerError),{datakitUrl:(n=e.datakitUrl||e.datakitOrigin,n.lastIndexOf("/")===n.length-1?En(n)+"v1/write/rum":En(n)+"/v1/write/rum"),logsEndpoint:On(e.datakitOrigin),isIntakeUrl:t,isServerError:r}}(e));Te.error("Sample Rate should be a number between 0 and 100")}function In(e){var t={};return t.secure=function(e){return!!e.useSecureSessionCookie||!!e.useCrossSiteSessionCookie}(e),t.crossSite=!!e.useCrossSiteSessionCookie,e.trackSessionAcrossSubdomains&&(t.domain=function(){if(void 0===wn){for(var e="dd_site_test_".concat(A()),t=window.location.hostname.split("."),n=t.pop();t.length&&!Sn(e);)n=t.pop()+"."+n,_n(e,"test",V,{domain:n});wn=n}return wn}()),t}function Rn(){var e;return xn||(e=new jt((function(){if(window.fetch)return wt(window,"fetch",(function(t){return function(n,r){var i,o=function(e,t,n){var r=n&&n.method||"object"==typeof t&&t.method||"GET",i=mn("object"==typeof t&&t.url||t),o=J(),a={state:"start",init:n,input:t,method:r,startClocks:o,url:i};return e.notify(a),a}(e,n,r);return o?(i=t.call(this,o.input,o.init),function(e,t,n){var r=function(t){var r=n;r.state="complete",r.duration=ee(r.startClocks.timeStamp,Y()),"stack"in t||t instanceof Error?(r.status=0,r.isAborted=t instanceof DOMException&&t.code===DOMException.ABORT_ERR,r.error=t,e.notify(r)):"status"in t&&(r.response=t,r.responseType=t.type,r.status=t.status,r.isAborted=!1,e.notify(r))};t.then(r,r)}(e,i,o)):i=t.call(this,n,r),i}})).stop})),xn=e),xn}var An={};function Mn(){var e;return Cn||(e=new jt((function(){var t=_t(XMLHttpRequest.prototype,"open",{before:Bn}),n=_t(XMLHttpRequest.prototype,"send",{before:function(){Un.call(this,e)}}),r=_t(XMLHttpRequest.prototype,"abort",{before:$n});return function(){t.stop(),n.stop(),r.stop()}})),Cn=e),Cn}function Bn(e,t){var n=this._DATAFLUX_REQUEST_UUID||A();this._DATAFLUX_REQUEST_UUID=n,An[n]={state:"open",method:e,url:mn(String(t))}}function Un(e){var t=An[this._DATAFLUX_REQUEST_UUID];if(t){var n=t;n.state="start",n.startTime=K(),n.startClocks=J(),n.isAborted=!1,n.xhr=this;var r=!1,i=_t(this,"onreadystatechange",{before:function(){this.readyState===XMLHttpRequest.DONE&&o.call(this)}}),o=function o(){if(this.removeEventListener("loadend",o),i.stop(),!r){r=!0;var a=t;a.state="complete",a.duration=ee(n.startClocks.timeStamp,Y()),a.status=this.status,e.notify(l(a)),Ln.call(this)}};this.addEventListener("loadend",o),e.notify(n)}}function Ln(){delete An[this._DATAFLUX_REQUEST_UUID],delete this._DATAFLUX_REQUEST_UUID}function $n(){var e=An[this._DATAFLUX_REQUEST_UUID];e&&(e.isAborted=!0)}var Pn={action_id:"action.id",sdk_name:"_dd.sdk_name",sdk_version:"_dd.sdk_version",app_id:"application.id",env:"env",service:"service",version:"version",userid:"user.id",user_email:"user.email",user_name:"user.name",session_id:"session.id",session_type:"session.type",session_sampling:"session.is_sampling",is_signin:"user.is_signin",os:"device.os",os_version:"device.os_version",os_version_major:"device.os_version_major",browser:"device.browser",browser_version:"device.browser_version",browser_version_major:"device.browser_version_major",screen_size:"device.screen_size",network_type:"device.network_type",device:"device.device",view_id:"view.id",view_referrer:"view.referrer",view_url:"view.url",view_host:"view.host",view_path:"view.path",view_path_group:"view.path_group",view_url_query:"view.url_query"},Dn={view:{type:st.VIEW,tags:{view_loading_type:"view.loading_type",view_apdex_level:"view.apdex_level",is_active:"view.is_active"},fields:{view_error_count:"view.error.count",view_resource_count:"view.resource.count",view_long_task_count:"view.long_task.count",view_action_count:"view.action.count",first_contentful_paint:"view.first_contentful_paint",largest_contentful_paint:"view.largest_contentful_paint",cumulative_layout_shift:"view.cumulative_layout_shift",first_input_delay:"view.first_input_delay",loading_time:"view.loading_time",dom_interactive:"view.dom_interactive",dom_content_loaded:"view.dom_content_loaded",dom_complete:"view.dom_complete",load_event:"view.load_event",first_input_time:"view.first_input_time",first_meaningful_paint:"view.largest_contentful_paint",first_paint_time:"view.fpt",resource_load_time:"view.resource_load_time",time_to_interactive:"view.tti",dom:"view.dom",dom_ready:"view.dom_ready",time_spent:"view.time_spent"}},resource:{type:st.RESOURCE,tags:{trace_id:"_dd.trace_id",span_id:"_dd.span_id",resource_url:"resource.url",resource_url_host:"resource.url_host",resource_url_path:"resource.url_path",resource_url_path_group:"resource.url_path_group",resource_url_query:"resource.url_query",resource_type:"resource.type",resource_status:"resource.status",resource_status_group:"resource.status_group",resource_method:"resource.method"},fields:{duration:"resource.duration",resource_size:"resource.size",resource_dns:"resource.dns",resource_tcp:"resource.tcp",resource_ssl:"resource.ssl",resource_ttfb:"resource.ttfb",resource_trans:"resource.trans",resource_first_byte:"resource.firstbyte"}},error:{type:st.ERROR,tags:{error_id:"error.id",trace_id:"_dd.trace_id",span_id:"_dd.span_id",error_source:"error.source",error_type:"error.type",error_handling:"error.handling"},fields:{error_message:["string","error.message"],error_stack:["string","error.stack"],error_causes:["string","error.causes"]}},long_task:{type:st.LONG_TASK,tags:{long_task_id:"long_task.id"},fields:{duration:"long_task.duration"}},action:{type:st.ACTION,tags:{action_name:"action.target.name",action_type:"action.type"},fields:{duration:"action.loading_time",action_error_count:"action.error.count",action_resource_count:"action.resource.count",action_frustration_types:"action.frustration.type",action_long_task_count:"action.long_task.count"}},browser_log:{type:st.LOGGER,tags:{error_source:"error.source",error_type:"error.type",error_resource_url:"http.url",error_resource_url_host:"http.url_host",error_resource_url_path:"http.url_path",error_resource_url_path_group:"http.url_path_group",error_resource_status:"http.status_code",error_resource_status_group:"http.status_group",error_resource_method:"http.method",action_id:"user_action.id",service:"service",status:"status"},fields:{message:["string","message"]}}};var Fn,Nn=144e5,jn=9e5,qn=/^([a-z]+)=([a-z0-9-]+)$/,Vn="&",Qn="_dataflux_s",Wn=[];function Gn(e,t){if(void 0===t&&(t=0),Fn||(Fn=e),e===Fn)if(t>=100)zn();else{var n,r=Jn();if(Hn()){if(r.lock)return void Xn(e,t);if(n=A(),r.lock=n,Kn(r,e.options),(r=Jn()).lock!==n)return void Xn(e,t)}var i=e.process(r);if(Hn()&&(r=Jn()).lock!==n)Xn(e,t);else{if(i&&function(e,t){if(Yn(e))return void function(e){_n(Qn,"",0,e)}(t);e.expire=String(Z()+jn),Kn(e,t)}(i,e.options),Hn()&&(!i||!Yn(i))){if((r=Jn()).lock!==n)return void Xn(e,t);delete r.lock,Kn(r,e.options),i=r}e.after&&e.after(i||r),zn()}}else Wn.push(e)}function Hn(){return!!window.chrome||/HeadlessChrome/.test(window.navigator.userAgent)}function Xn(e,t){setTimeout((function(){Gn(e,t+1)}),10)}function zn(){Fn=void 0;var e=Wn.shift();e&&Gn(e)}function Kn(e,t){_n(Qn,function(e){return w(C(e),(function(e){return e[0]+"="+e[1]})).join(Vn)}(e),jn,t)}function Jn(){var e=Sn(Qn),t={};return function(e){return void 0!==e&&(-1!==e.indexOf(Vn)||qn.test(e))}(e)&&f(e.split(Vn),(function(e){var n=qn.exec(e);if(null!==n){var r=n[1],i=n[2];t[r]=i}})),t}function Yn(e){return x(e)}function Zn(e,t,n){var r=new jt,i=new jt,o=setInterval((function(){Gn({options:e,process:function(e){return c(e)?void 0:{}},after:u})}),1e3),a=function(){var e=Jn();if(c(e))return e;return{}}();function u(e){return c(e)||(e={}),s()&&(!function(e){return a.id!==e.id||a[t]!==e[t]}(e)?a=e:(a={},i.notify())),e}function s(){return void 0!==a[t]}function c(e){return(void 0===e.created||Z()-Number(e.created)<Nn)&&(void 0===e.expire||Z()<Number(e.expire))}return{expandOrRenewSession:I((function(){var i;Gn({options:e,process:function(e){var r=u(e);return i=function(e){var r=n(e[t]),i=r.trackingType,o=r.isTracked;e[t]=i,o&&!e.id&&(e.id=A(),e.created=String(Z()));return o}(r),r},after:function(e){i&&!s()&&function(e){a=e,r.notify()}(e),a=e}})}),1e3),expandSession:function(){Gn({options:e,process:function(e){return s()?u(e):void 0}})},getSession:function(){return a},renewObservable:r,expireObservable:i,stop:function(){clearInterval(o)}}}var er=[],tr=function(e,t,n){var r=Zn(e,t,n);er.push((function(){return r.stop()}));var i,o=new xe(144e5);function a(){return{id:r.getSession().id,trackingType:r.getSession()[t]}}return er.push((function(){return o.stop()})),r.renewObservable.subscribe((function(){o.add(a(),K())})),r.expireObservable.subscribe((function(){o.closeActive(K())})),r.expandOrRenewSession(),o.add(a(),te().relative),i=se(window,[Re,Le,Ae,Ue],(function(){return r.expandOrRenewSession()}),{capture:!0,passive:!0}),er.push(i.stop),function(e){var t=function(){"visible"===document.visibilityState&&e()},n=ue(document,$e,t);er.push(n.stop);var r=setInterval(t,6e4);er.push((function(){clearInterval(r)}))}((function(){return r.expandSession()})),{findActiveSession:function(e){return o.find(e)},renewObservable:r.renewObservable,expireObservable:r.expireObservable}};var nr=3145728,rr="UP",ir="FAILURE_DETECTED",or="DOWN",ar="AFTER_SUCCESS",ur="AFTER_RESUME";function sr(e,t,n,r){t.transportStatus===rr&&0===t.queuedPayloads.size()&&t.bandwidthMonitor.canHandle(e)?fr(e,t,n,{onSuccess:function(){return dr(ar,t,n,r)},onFailure:function(){t.queuedPayloads.enqueue(e),cr(t,n,r)}}):t.queuedPayloads.enqueue(e)}function cr(e,t,n){e.transportStatus===or&&setTimeout((function(){fr(e.queuedPayloads.first(),e,t,{onSuccess:function(){e.queuedPayloads.dequeue(),e.currentBackoffTime=1e3,dr(ur,e,t,n)},onFailure:function(){e.currentBackoffTime=Math.min(256e3,2*e.currentBackoffTime),cr(e,t,n)}})}),e.currentBackoffTime)}function fr(e,t,n,r){var i=r.onSuccess,o=r.onFailure;t.bandwidthMonitor.add(e),n(e,(function(n){t.bandwidthMonitor.remove(e),!function(e){return 0!==e.status&&e.status<500}(n)?(t.transportStatus=t.bandwidthMonitor.ongoingRequestCount>0?ir:or,t.lastFailureStatus=n.status,o()):(t.transportStatus=rr,i())}))}function dr(e,t,n,r){e===ar&&t.queuedPayloads.isFull()&&!t.queueFullReported&&(r({message:"Reached max events size queued for upload: 3MiB",source:Ut.AGENT,startClocks:J()}),t.queueFullReported=!0);var i=t.queuedPayloads;for(t.queuedPayloads=lr();i.size()>0;)sr(i.dequeue(),t,n,r)}function lr(){var e=[];return{bytesCount:0,enqueue:function(t){this.isFull()||(e.push(t),this.bytesCount+=t.bytesCount)},first:()=>e[0],dequeue(){var t=e.shift();return t&&(this.bytesCount-=t.bytesCount),t},size:()=>e.length,isFull(){return this.bytesCount>=nr}}}function pr(e){return e?e+(-1===e.indexOf("?")?"?":"&")+"precision=ms":e}function vr(e,t,n){var r={transportStatus:rr,lastFailureStatus:0,currentBackoffTime:1e3,bandwidthMonitor:{ongoingRequestCount:0,ongoingByteCount:0,canHandle:function(e){return 0===this.ongoingRequestCount||this.ongoingByteCount+e.bytesCount<=81920&&this.ongoingRequestCount<32},add:function(e){this.ongoingRequestCount+=1,this.ongoingByteCount+=e.bytesCount},remove:function(e){this.ongoingRequestCount-=1,this.ongoingByteCount-=e.bytesCount}},queuedPayloads:lr(),queueFullReported:!1},i=function(n,r){return function(e,t,n,r){var i=n.data,o=n.bytesCount,a=pr(e);(function(){try{return window.Request&&"keepalive"in new Request("http://a")}catch(e){return!1}})()&&o<t?fetch(a,{method:"POST",body:i,keepalive:!0}).then((function(e){"function"==typeof r&&r({status:e.status})}),(function(){hr(a,i,r)})):hr(a,i,r)}(e,t,n,r)};return{send:function(e){sr(e,r,i,n)},sendOnExit:function(n){!function(e,t,n){var r=n.data,i=n.bytesCount,o=pr(e);if(navigator.sendBeacon&&i<t)try{if(navigator.sendBeacon(o,r))return}catch(e){}hr(o,r)}(e,t,n)}}}function hr(e,t,n){var r=new XMLHttpRequest;r.open("POST",e,!0),r.send(t),r.addEventListener("loadend",(function(){"function"==typeof n&&n({status:r.status})}))}var mr=/[^\u0000-\u007F]/,gr="custom_keys",yr=function(e){if(!e||!e.type)return{rowStr:"",rowData:void 0};var t={tags:{},fields:{}},n=!1,r="";return f(Dn,(function(i,o){if(i.type===e.type){r+=o+",",t.measurement=o;var a=[],u=p({},Pn,i.tags),s=["date","type",gr];f(u,(function(n,r){var i=oe(e,n);s.push(r),(i||O(i))&&(t.tags[r]=function(e){return T(e)?e:F(e)}(i),a.push(me(r)+"="+me(i)))}));var c=[];if(f(i.fields,(function(n,r){if(h(n)&&2===n.length){n[0];var i=n[1],o=oe(e,i);s.push(r),(o||O(o))&&(t.fields[r]=o,c.push(me(r)+"="+ye(o)))}else if(T(n)){o=oe(e,n);s.push(r),(o||O(o))&&(t.fields[r]=o,c.push(me(r)+"="+ye(o)))}})),e.tags&&S(e.tags)&&!x(e.tags)){var d=[];f(e.tags,(function(e,n){s.indexOf(n)>-1||(s.push(n),(e||O(e))&&(d.push(n),t.fields[n]=e,c.push(me(n)+"="+ye(e))))})),d.length&&(t.fields.custom_keys=ye(d),c.push(me(gr)+"="+ye(d)))}e.type===st.LOGGER&&f(e,(function(e,n){-1===s.indexOf(n)&&(O(e)||T(e)||E(e))&&(t.fields[n]=e,c.push(me(n)+"="+ye(e)))})),a.length&&(r+=a.join(",")),c.length&&(r+=" ",r+=c.join(","),n=!0),r=r+" "+e.date,t.time=X(e.date)}})),{rowStr:n?r:"",rowData:n?t:void 0}},br=function(e,t,n,r,i,o){this.pushOnlyBuffer=[],this.upsertBuffer={},this.bufferBytesCount=0,this.bufferMessagesCount=0,this.request=e,this.batchMessagesLimit=t,this.batchBytesLimit=n,this.messageBytesLimit=r,this.flushTimeout=i,this.beforeUnloadCallback="function"==typeof o?o:j,this.setupFlushOnExit(),this.flushPeriodically()};br.prototype.add=function(e){this.addOrUpdate(e)},br.prototype.upsert=function(e,t){this.addOrUpdate(e,t)},br.prototype.flush=function(e){if("function"!=typeof e&&(e=this.request.send),0!==this.bufferMessagesCount){var t=this.pushOnlyBuffer.concat(y(this.upsertBuffer)),n=this.bufferBytesCount;this.pushOnlyBuffer=[],this.upsertBuffer={},this.bufferBytesCount=0,this.bufferMessagesCount=0,t.length>0&&e({data:t.join("\n"),bytesCount:n})}},br.prototype.flushOnExit=function(){this.flush(this.request.sendOnExit)},br.prototype.computeBytesCount=function(e){return mr.test(e)?void 0!==window.TextEncoder?(new TextEncoder).encode(e).length:new Blob([e]).size:e.length},br.prototype.addOrUpdate=function(e,t){var n=this.process(e),r=n.processedMessage,i=n.messageBytesCount;i>=this.messageBytesLimit?Te.warn("Discarded a message whose size was bigger than the maximum allowed size "+this.messageBytesLimit+"KB."):(this.hasMessageFor(t)&&this.remove(t),this.willReachedBytesLimitWith(i)&&this.flush(),this.push(r,i,t),this.isFull()&&this.flush())},br.prototype.process=function(e){var t=yr(e).rowStr;return{processedMessage:t,messageBytesCount:this.computeBytesCount(t)}},br.prototype.push=function(e,t,n){this.bufferMessagesCount>0&&(this.bufferBytesCount+=1),void 0!==n?this.upsertBuffer[n]=e:this.pushOnlyBuffer.push(e),this.bufferBytesCount+=t,this.bufferMessagesCount+=1},br.prototype.remove=function(e){var t=this.upsertBuffer[e];delete this.upsertBuffer[e];var n=this.computeBytesCount(t);this.bufferBytesCount-=n,this.bufferMessagesCount-=1,this.bufferMessagesCount>0&&(this.bufferBytesCount-=1)},br.prototype.hasMessageFor=function(e){return void 0!==e&&void 0!==this.upsertBuffer[e]},br.prototype.willReachedBytesLimitWith=function(e){return this.bufferBytesCount+e+1>=this.batchBytesLimit},br.prototype.isFull=function(){return this.bufferMessagesCount===this.batchMessagesLimit||this.bufferBytesCount>=this.batchBytesLimit},br.prototype.flushPeriodically=function(){var e=this;setTimeout((function(){e.flush(),e.flushPeriodically()}),this.flushTimeout)},br.prototype.setupFlushOnExit=function(){var e=this;navigator.sendBeacon&&(ue(window,Ie,this.beforeUnloadCallback),ue(document,$e,(function(){"hidden"===document.visibilityState&&e.flushOnExit()})),ue(window,Ie,(function(){return e.flushOnExit()})))};var wr=br,_r="0",Sr="1",xr="2";function Cr(e,t){var n=tr(e.cookieOptions,"rum",(function(t){return function(e,t){var n;n=function(e){return e===_r||e===Sr||e===xr}(t)?t:W(e.sampleRate)?W(e.sessionReplaySampleRate)?Sr:xr:_r;return{trackingType:n,isTracked:Tr(n)}}(e,t)}));return n.expireObservable.subscribe((function(){t.notify(rn)})),n.renewObservable.subscribe((function(){t.notify(nn)})),{findTrackedSession:function(e){var t=n.findActiveSession(e);if(t&&Tr(t.trackingType))return{id:t.id}}}}function Tr(e){return e===xr||e===Sr}var Er="_dataflulx_usr_id",Or="initial_document",kr=[[He,function(e){return Or===e}],[Xe,function(e){return"xmlhttprequest"===e}],[Ke,function(e){return"fetch"===e}],[ze,function(e){return"beacon"===e}],[Je,function(e,t){return null!==t.match(/\.css$/i)}],[Ye,function(e,t){return null!==t.match(/\.js$/i)}],[Ze,function(e,t){return ce(["image","img","icon"],e)||null!==t.match(/\.(gif|jpg|jpeg|tiff|png|svg|ico)$/i)}],[et,function(e,t){return null!==t.match(/\.(woff|eot|woff2|ttf)$/i)}],[tt,function(e,t){return ce(["audio","video"],e)||null!==t.match(/\.(mp3|mp4)$/i)}]];function Ir(e){var t=e.name;if(!function(e){try{return!!gn(e)}catch(e){return!1}}(t))return nt;var n=function(e){var t=gn(e).pathname;return"/"===t[0]?t:"/"+t}(t),r=nt;return f(kr,(function(t){var i=t[0];if((0,t[1])(e.initiatorType,n))return r=i,!1})),r}function Rr(){for(var e=g(arguments),t=1;t<e.length;t+=1)if(e[t-1]>e[t])return!1;return!0}function Ar(e){var t=Mr(e);if(t){var n=t.startTime,r=t.fetchStart,i=t.redirectStart,o=t.redirectEnd,a=t.domainLookupStart,u=t.domainLookupEnd,s=t.connectStart,c=t.secureConnectionStart,f=t.connectEnd,d=t.requestStart,l=t.responseStart,p=t.responseEnd,v={firstbyte:Ur(n,a,l),trans:Ur(n,l,p),ttfb:Ur(n,d,l)};return f!==r&&(v.tcp=Ur(n,s,f),Rr(s,c,f)&&(v.ssl=Ur(n,c,f))),u!==r&&(v.dns=Ur(n,a,u)),Br(e)&&(v.redirect=Ur(n,i,o)),v}}function Mr(e){if(Rr(e.startTime,e.fetchStart,e.domainLookupStart,e.domainLookupEnd,e.connectStart,e.connectEnd,e.requestStart,e.responseStart,e.responseEnd)){if(!Br(e))return e;var t=e.redirectStart,n=e.redirectEnd;if(t<e.startTime&&(t=e.startTime),n<e.startTime&&(n=e.fetchStart),Rr(e.startTime,t,n,e.fetchStart))return p({},e,{redirectEnd:n,redirectStart:t})}}function Br(e){return e.fetchStart!==e.startTime}function Ur(e,t,n){return H(n-t)}function Lr(e){if(e.startTime<e.responseStart)return e.decodedBodySize}function $r(e,t){return t&&!function(e,t){var n=[t.datakitUrl];return t.logsEndpoint&&n.push(t.logsEndpoint),_(n,(function(t){return 0===e.indexOf(t)}))||t.isIntakeUrl(e)}(t,e)}function Pr(){return void 0!==window.performance&&"getEntries"in performance}function Dr(e){return window.PerformanceObserver&&void 0!==PerformanceObserver.supportedEntryTypes&&ce(PerformanceObserver.supportedEntryTypes,e)}function Fr(e,t){var n;if(n=function(n){qr(e,t,[n])},Nr("interactive",(function(){var e,t={entryType:"resource",initiatorType:Or,traceId:""};if(Dr("navigation")&&performance.getEntriesByType("navigation").length>0){var r=performance.getEntriesByType("navigation")[0];e=p(r.toJSON(),t)}else{var i=jr();e=p(i,{decodedBodySize:0,duration:i.responseEnd,name:window.location.href,startTime:0},t)}n(e)})),Pr()){var r=performance.getEntries();setTimeout((function(){qr(e,t,r)}))}if(window.PerformanceObserver){var i=function(n){qr(e,t,n.getEntries())},o=["resource","navigation","longtask","paint"],a=["largest-contentful-paint","first-input","layout-shift"];try{f(a,(function(e){new PerformanceObserver(i).observe({type:e,buffered:!0})}))}catch(e){f(a,(function(e){o.push(e)}))}new PerformanceObserver(i).observe({entryTypes:o}),Pr()&&"addEventListener"in performance&&performance.addEventListener("resourcetimingbufferfull",(function(){performance.clearResourceTimings()}))}Dr("navigation")||function(e){function t(){e(p(jr(),{entryType:"navigation"}))}Nr("complete",(function(){setTimeout(t)}))}((function(n){qr(e,t,[n])})),Dr("first-input")||function(e){var t=Z(),n=!1,r=se(window,[Re,Ve,Ae,Le,De],(function(e){if(e.cancelable){var t={entryType:"first-input",processingStart:K(),startTime:e.timeStamp};e.type===De?i(t):o(t)}}),{passive:!0,capture:!0}).stop;function i(e){se(window,[Fe,Ne],(function(t){t.type===Fe&&o(e)}),{once:!0})}function o(i){if(!n){n=!0,r();var o=i.processingStart-i.startTime;o>=0&&o<Z()-t&&e(i)}}}((function(n){return qr(e,t,[n])}))}function Nr(e,t){document.readyState===e||"complete"===document.readyState?t():ue(window,"complete"===e?Me:Pe,t,{once:!0})}function jr(){var e={},t=performance.timing;for(var n in t)O(t[n])&&(e[n]=0===t[n]?0:z(t[n]));return e}function qr(e,t,n){var r=b(n,(function(e){return"resource"===e.entryType||"navigation"===e.entryType||"paint"===e.entryType||"longtask"===e.entryType||"largest-contentful-paint"===e.entryType||"first-input"===e.entryType||"layout-shift"===e.entryType})),i=b(r,(function(e){return!function(e){return"navigation"===e.entryType&&e.loadEventEnd<=0}(e)&&!function(e,t){return"resource"===t.entryType&&!$r(e,t.name)}(t,e)}));i.length&&e.notify(Jt,i)}function Vr(){var e=function(){var e,t=window;if(t.Zone){var n=t.Zone.__symbol__;if(!(e=t[n("MutationObserver")])&&t.MutationObserver){var r=new t.MutationObserver(j)[n("originalInstance")];e=r&&r.constructor}}e||(e=t.MutationObserver);return e}(),t=new jt((function(){if(e){var n=new e((function(){return t.notify()}));return n.observe(document,{attributes:!0,characterData:!0,childList:!0,subtree:!0}),function(){return n.disconnect()}}}));return t}function Qr(e){var t=l(e),n=new jt((function(){var e=function(e){var t=history.pushState;history.pushState=function(){t.apply(this,arguments),e()};var n=history.replaceState;history.replaceState=function(){n.apply(this,arguments),e()};var r=ue(window,Be,e).stop;return{stop:function(){r(),history.pushState=t,history.replaceState=n}}}(r),t=ue(window,je,r);return function(){e.stop(),t.stop()}}));function r(){if(t.href!==e.href){var r=l(e);n.notify({newLocation:r,oldLocation:t}),t=r}}return n}function Wr(e,t){void 0===t&&(t=j);var n={errorCount:0,longTaskCount:0,resourceCount:0,actionCount:0,frustrationCount:0},r=e.subscribe(cn,(function(e){switch(e.type){case st.ERROR:n.errorCount+=1,t(n);break;case st.ACTION:e.action.frustration&&(n.frustrationCount+=e.action.frustration.type.length),n.actionCount+=1,t(n);break;case st.LONG_TASK:n.longTaskCount+=1,t(n);break;case st.RESOURCE:n.resourceCount+=1,t(n)}}));return{stop:function(){r.unsubscribe()},eventCounts:n}}function Gr(e,t,n,r,i){return function(e,t,n){var r,i=!1,o=setTimeout((function(){c({hadActivity:!1})}),100),a=n&&setTimeout((function(){return c({hadActivity:!0,end:Y()})}),n),u=e.subscribe((function(e){var t=e.isBusy;clearTimeout(o),clearTimeout(r);var n=Y();t||(r=setTimeout((function(){c({hadActivity:!0,end:n})}),100))})),s=function(){i=!0,clearTimeout(o),clearTimeout(r),clearTimeout(a),u.unsubscribe()};function c(e){i||(s(),t(e))}return{stop:s}}(function(e,t,n){var r=new jt((function(){var i,o=[],a=0;return o.push(t.subscribe(u),e.subscribe(Jt,(function(e){_(e,(function(e){return"resource"===e.entryType&&!Hr(n,e.name)}))&&u()})),e.subscribe(an,(function(e){Hr(n,e.url)||(void 0===i&&(i=e.requestIndex),a+=1,u())})),e.subscribe(un,(function(e){Hr(n,e.url)||void 0===i||e.requestIndex<i||(a-=1,u())}))),_t(window,"open",{before:u}),function(){f(o,(function(e){e.unsubscribe()}))};function u(){r.notify({isBusy:a>0})}}));return r}(e,t,n),r,i)}function Hr(e,t){return n=e.excludedActivityUrls,r=t,_(n,(function(e){return e===r||e instanceof RegExp&&e.test(r)}));var n,r}var Xr=V,zr="WaitingForMoreClicks",Kr="WaitingForClicksToStop",Jr="Finalized";function Yr(e,t){var n,r=[],i=zr;function o(e){e.stopObservable.subscribe(a),r.push(e),clearTimeout(n),n=setTimeout(s,1e3)}function a(){i===Kr&&function(e,t,n){if(e.every)return e.every(t);for(var r=!0,i=0;i<e.length;i++)if(u.call(e,i)){var o=e[i];if(!t.call(n,o,i,e)){r=!1;break}}return r}(r,(function(e){return e.isStopped()}))&&(i=Jr,t(r))}function s(){clearTimeout(n),i===zr&&(i=Kr,a())}return o(e),{tryAppend:function(e){return i===zr&&(r.length>0&&(t=r[r.length-1].event,n=e.event,!(t.target===n.target&&(a=t,u=n,Math.sqrt(Math.pow(a.clientX-u.clientX,2)+Math.pow(a.clientY-u.clientY,2))<=100)&&t.timeStamp-n.timeStamp<=Xr))?(s(),!1):(o(e),!0));var t,n,a,u},stop:function(){s()}}}var Zr="data-guance-action-name";function ei(e,t){return ti(e,Zr)||t&&ti(e,t)||ai(e,t,ii)||ai(e,t,oi)||""}function ti(e,t){var n;if(function(){void 0===ri&&(ri="closest"in HTMLElement.prototype);return ri}())n=e.closest("["+t+"]");else for(var r=e;r;){if(r.hasAttribute(t)){n=r;break}r=r.parentElement}if(n)return si(ui(n.getAttribute(t).trim()))}var ni,ri,ii=[function(e,t){if(function(){void 0===ni&&(ni="labels"in HTMLInputElement.prototype);return ni}()){if("labels"in e&&e.labels&&e.labels.length>0)return ci(e.labels[0],t)}else if(e.id){var n=e.ownerDocument&&de(e.ownerDocument.querySelectorAll("label"),(function(t){return t.htmlFor===e.id}));return n&&ci(n,t)}},function(e){if("INPUT"===e.nodeName){var t=e,n=t.getAttribute("type");if("button"===n||"submit"===n||"reset"===n)return t.value}},function(e,t){if("BUTTON"===e.nodeName||"LABEL"===e.nodeName||"button"===e.getAttribute("role"))return ci(e,t)},function(e){return e.getAttribute("aria-label")},function(e,t){var n=e.getAttribute("aria-labelledby");if(n)return n=n.split(/\s+/),n=w(n,(function(t){return function(e,t){return e.ownerDocument?e.ownerDocument.getElementById(t):null}(e,t)})),n=b(n,(function(e){return Boolean(e)})),(n=w(n,(function(e){return ci(e)}))).join(" ")},function(e){return e.getAttribute("alt")},function(e){return e.getAttribute("name")},function(e){return e.getAttribute("title")},function(e){return e.getAttribute("placeholder")},function(e){if("options"in e&&e.options.length>0)return ci(e.options[0])}],oi=[function(e,t){return ci(e,t)}];function ai(e,t,n){for(var r=e,i=0;i<=10&&r&&"BODY"!==r.nodeName&&"HTML"!==r.nodeName&&"HEAD"!==r.nodeName;){for(var o of n){var a=o(r,t);if("string"==typeof a){var u=a.trim();if(u)return si(ui(u))}}if("FORM"===r.nodeName)break;r=r.parentElement,i+=1}}function ui(e){return e.replace(/\s+/g," ")}function si(e){return e.length>100?ae(e,100)+" [...]":e}function ci(e,t){if(!e.isContentEditable){if("innerText"in e){var n=e.innerText,r=function(t){for(var r=e.querySelectorAll(t),i=0;i<r.length;i+=1){var o=r[i];if("innerText"in o){var a=o.innerText;a&&a.trim().length>0&&(n=n.replace(a,""))}}};return Boolean(document.documentMode)&&r("script, style"),r("[data-guance-action-name]"),t&&r("["+t+"]"),n}return e.textContent}}function fi(){var e=window.getSelection();return!e||e.isCollapsed}function di(e){return e.target instanceof Element}function li(e,t){if(function(e){if(_(e,(function(e){return e.getUserActivity().selection})))return!1;for(var t=0;t<e.length-2;t+=1)if(e[t+3-1].event.timeStamp-e[t].event.timeStamp<=V)return!0;return!1}(e))return t.addFrustration(ot),e.some(pi)&&t.addFrustration(ut),t.hasError&&t.addFrustration(at),{isRage:!0};var n=_(e,(function(e){return e.getUserActivity().selection}));return f(e,(function(e){e.hasError&&e.addFrustration(at),pi(e)&&!n&&e.addFrustration(ut)})),{isRage:!1}}function pi(e){return!e.hasPageActivity&&!e.getUserActivity().input&&(t=e.event.target,n='input:not([type="checkbox"]):not([type="radio"]):not([type="button"]):not([type="submit"]):not([type="reset"]):not([type="range"]),textarea,select,canvas,a[href],a[href] *',!(t.matches?t.matches(n):t.msMatchesSelector&&t.msMatchesSelector(n)));var t,n}function vi(e,t,n){var r,i=new xe(3e5),o=new jt;e.subscribe(nn,(function(){i.reset()})),e.subscribe(on,m),e.subscribe(tn,m);var a,u,s,c,d,l,p,v,h=(c=(a={onPointerDown:function(e){return function(e,t){return function(e,t){var n,r;return{type:"click",target:n,position:r,name:ei(e.target,t)}}(t,e.actionNameAttribute)}(n,e)},onClick:function(r,a,u){return function(e,t,n,r,i,o,a,u,s){var c=yi(t,r,s,a,u);e.trackFrustrations&&o(c);var f=Gr(t,n,e,(function(t){t.hadActivity&&t.end<c.startClocks.timeStamp?c.discard():(c.stop(t.hadActivity?t.end:void 0),e.trackFrustrations||(t.hadActivity?c.validate():c.discard()))}),1e4),d=t.subscribe(tn,(function(e){c.stop(e.endClocks.timeStamp)})),l=i.subscribe((function(){c.stop()}));c.stopObservable.subscribe((function(){d.unsubscribe(),f.stop(),l.unsubscribe()}))}(n,e,t,i,o,g,r,a,u)}}).onClick,d=a.onPointerDown,l=!1,p=!1,v=[ue(window,De,(function(e){l=!1,u=fi(),di(e)&&(s=d(e))}),{capture:!0}),ue(window,Ge,(function(){u&&fi()||(l=!0)}),{capture:!0}),ue(window,Re,(function(e){if(di(e)&&s){var t={selection:l,input:p};p||setTimeout((function(){t.input=p})),c(s,e,(function(){return t})),s=void 0}}),{capture:!0}),ue(window,Qe,(function(){p=!0}),{capture:!0})],{stop:function(){f(v,(function(e){return e.stop()}))}}).stop;return{stop:function(){m(),o.notify(),h()},actionContexts:{findActionId:function(e){return n.trackFrustrations?i.findAll(e):i.find(e)}}};function m(){r&&r.stop()}function g(e){if(!r||!r.tryAppend(e)){var t=e.clone();r=Yr(e,(function(e){!function(e,t){li(e,t).isRage?(f(e,(function(e){e.discard()})),t.stop(Y()),t.validate(w(e,(function(e){return e.event})))):(t.discard(),f(e,(function(e){e.validate()})))}(e,t)}))}}}var hi="ONGOING",mi="STOPPED",gi="FINALIZED";function yi(e,t,n,r,i){var o,a=A(),u=J(),s=t.add(a,u.relative),c=Wr(e),f=hi,l=[],p=new jt;function v(e){f===hi&&(f=mi,(o=e)?s.close(z(o)):s.remove(),c.stop(),p.notify())}return{event:i,stop:v,startClocks:u,stopObservable:p,hasError:c.eventCounts.errorCount>0,hasPageActivity:void 0!==o,getUserActivity:n,addFrustration:function(e){l.push(e)},isStopped:function(){return f===mi||f===gi},clone:function(){return yi(e,t,n,r,i)},validate:function(t){if(v(),f===mi){var n=c.eventCounts,s=n.resourceCount,p=n.errorCount,h=n.longTaskCount,m=d({type:rt,duration:o&&ee(u.timeStamp,o),startClocks:u,id:a,frustrationTypes:l,counts:{resourceCount:s,errorCount:p,longTaskCount:h},events:be(t,[i]),event:i},r);e.notify(Yt,m),f=gi}},discard:function(){v(),f=gi}}}function bi(e){var t=wi(e)?{action:{error:{count:e.counts.errorCount},id:e.id,loadingTime:X(e.duration),frustration:{type:e.frustrationTypes},long_task:{count:e.counts.longTaskCount},resource:{count:e.counts.resourceCount}},_dd:{action:{target:e.target,position:e.position}}}:{action:{loadingTime:0}};return{customerContext:wi(e)?void 0:e.context,rawRumEvent:v({action:{id:A(),target:{name:e.name},type:e.type},date:e.startClocks.timeStamp,type:st.ACTION},t),startTime:e.startClocks.relative,domainContext:wi(e)?{event:e.event,events:e.events}:{}}}function wi(e){return e.type!==it}function _i(e,t,n){var r=function(e,t,n){var r=i(e.datakitUrl,(function(){t.notify(on)}));function i(t,r){return new wr(vr(t,e.batchBytesLimit,n),e.batchMessagesLimit,e.batchBytesLimit,e.messageBytesLimit,e.flushTimeout,r)}return{add:function(e){r.add(e)},upsert:function(e,t){r.upsert(e,t)}}}(e,t,n);t.subscribe(cn,(function(e){e.type===st.VIEW?r.upsert(e,e.view.id):r.add(e)}))}var Si="synthetics",xi="user",Ci=["view.url","view.referrer","action.target.name","error.message","error.stack","error.resource.url","resource.url"],Ti=Ci.concat(["tags"]);function Ei(e,t,n,r,i,o,a,u,s){var c={};c[st.ERROR]=hn(st.ERROR,e.eventRateLimiterThreshold,s),c[st.ACTION]=hn(st.ACTION,e.eventRateLimiterThreshold,s),t.subscribe(sn,(function(s){var f=s.startTime,d=s.rawRumEvent,l=s.savedCommonContext,p=s.customerContext,h=s.domainContext,m=i.findView(f),g=o.findUrl(f),y=n.findTrackedSession(d.type!==st.VIEW?f:void 0);if(y&&m&&g){var b=a.findActionId(f),w=l||u(),_={_dd:{sdkName:e.sdkName,sdkVersion:e.sdkVersion,drift:Math.round(Z()-(ie()+performance.now()))},terminal:{type:"web"},application:{id:e.applicationId},device:ke,env:e.env||"",service:m.service||e.service||"browser",version:m.version||e.version||"",source:"browser",date:Y(),user:{id:r.getId(),is_signin:"F"},session:{type:void 0===window._DATAFLUX_SYNTHETICS_BROWSER?xi:Si,id:y.id},view:{id:m.id,name:m.name,url:g.url,referrer:g.referrer,host:g.host,path:g.path,pathGroup:g.pathGroup,urlQuery:g.urlQuery},action:Oi(d)&&b?{id:b}:void 0},S=ve(v(_,m,d)),C=v({},w.context,p);x(C)||(S.tags=C),"has_replay"in S.session||(S.session.has_replay=w.hasReplay),x(w.user)||(S.user=v({is_signin:"T"},w.user)),function(e,t,n,r){if(t){var i=ln(e,e.type===st.VIEW?Ci:Ti,(function(e){return t(e,r)}));if(!1===i&&e.type!==st.VIEW)return!1;!1===i&&Te.warn("Can't dismiss view events using beforeSend!")}var o=!1;n[e.type]&&(o=n[e.type].isLimitReached());return!o}(S,e.beforeSend,c,h)&&(x(S.tags)&&delete S.tags,t.notify(cn,S))}}))}function Oi(e){return-1!==[st.ERROR,st.RESOURCE,st.LONG_TASK].indexOf(e.type)}var ki;function Ii(e){var t=new jt;return function(e){var t=Qt([Ce.error]).subscribe((function(t){e.notify({startClocks:J(),message:t.message,stack:t.stack,source:Ut.CONSOLE,handling:yt,handlingStack:t.handlingStack})}))}(t),function(e){Bt((function(t,n){e.notify(Lt({stackTrace:t,originalError:n,startClocks:J(),nonErrorPrefix:"Uncaught",source:Ut.SOURCE,handling:bt}))}))}(t),function(e){var t=Xt([Ht,Gt]).subscribe((function(t){e.notify({startClocks:J(),message:t.message,stack:t.stack,type:t.subtype,source:Ut.REPORT,handling:bt})}))}(t),t.subscribe((function(t){e.notify(fn,{error:t})})),function(e){return e.subscribe(fn,(function(t){e.notify(sn,d({customerContext:t.customerContext,savedCommonContext:t.savedCommonContext},function(e){return{rawRumEvent:{date:e.startClocks.timeStamp,error:{id:A(),message:e.message,source:e.source,stack:e.stack,handling_stack:e.handlingStack,type:e.type,handling:e.handling,causes:e.causes,source_type:"browser"},type:st.ERROR},startTime:e.startClocks.relative,domainContext:{error:e.originalError}}}(t.error)))})),{addError:function(t,n){var r=t.error,i=Lt({stackTrace:r instanceof Error?xt(r):void 0,originalError:r,handlingStack:t.handlingStack,startClocks:t.startClocks,nonErrorPrefix:"Provided",source:Ut.CUSTOM,handling:yt});e.notify(fn,{customerContext:t.context,savedCommonContext:n,error:i})}}}(e)}function Ri(e){if(void 0===e&&(e=window),!ki)if("hidden"===document.visibilityState)ki={timeStamp:0};else{ki={timeStamp:1/0};var t=se(e,[qe,$e],(function(e){"pagehide"!==event.type&&"hidden"!==document.visibilityState||(ki.timeStamp=event.timeStamp,t())}),{capture:!0}).stop}return ki}var Ai=6e5;function Mi(e,t){var n={};function r(e){n=p(n,e),t(n)}var i=function(e,t){return{stop:e.subscribe(Jt,(function(e){for(var n of e)"navigation"===n.entryType&&t({fetchStart:n.fetchStart,responseEnd:n.responseEnd,domComplete:n.domComplete,domContentLoaded:n.domContentLoadedEventEnd,domInteractive:n.domInteractive,loadEvent:n.loadEventEnd,loadEventEnd:n.loadEventEnd,loadEventStart:n.loadEventStart,domContentLoadedEventEnd:n.domContentLoadedEventEnd,domContentLoadedEventStart:n.domContentLoadedEventStart})})).unsubscribe}}(e,r).stop,o=function(e,t){var n=Ri();return{stop:e.subscribe(Jt,(function(e){var r=de(e,(function(e){return"paint"===e.entryType&&"first-contentful-paint"===e.name&&e.startTime<n.timeStamp&&e.startTime<Ai}));r&&t(r.startTime)})).unsubscribe}}(e,(function(e){r({firstContentfulPaint:e})})).stop,a=function(e,t,n){var r=Ri(),i=1/0,o=se(t,[De,Ae],(function(e){i=e.timeStamp}),{capture:!0,once:!0}).stop,a=e.subscribe(Jt,(function(e){var t=function(e,t){for(var n=e.length-1;n>=0;n-=1){var r=e[n];if(t(r,n,e))return r}}(e,(function(e){return"largest-contentful-paint"===e.entryType&&e.startTime<i&&e.startTime<r.timeStamp&&e.startTime<Ai}));t&&n(t.startTime)})).unsubscribe;return{stop:function(){o(),a()}}}(e,window,(function(e){r({largestContentfulPaint:e})})).stop,u=function(e,t){var n=Ri();return{stop:e.subscribe(Jt,(function(e){var r=de(e,(function(e){return"first-input"===e.entryType&&e.startTime<n.timeStamp}));if(r){var i=ee(r.startTime,r.processingStart);t({firstInputDelay:i>=0?i:0,firstInputTime:r.startTime})}})).unsubscribe}}(e,(function(e){r({firstInputDelay:e.firstInputDelay,firstInputTime:e.firstInputTime})})).stop;return{stop:function(){i(),o(),a(),u()}}}function Bi(e,t,n,r,i,o){var a,u={eventCounts:{errorCount:0,longTaskCount:0,resourceCount:0,actionCount:0,frustrationCount:0}},s=Wr(e,(function(e){u.eventCounts=e,r()})).stop,c=function(e,t,n,r,i,o){var a=r===ct,u=!0,s=[];function c(){!u&&!a&&s.length>0&&o(Math.max.apply(Math,s))}return{setLoadEvent:function(e){a&&(a=!1,s.push(e),c())},stop:Gr(e,t,n,(function(e){u&&(u=!1,e.hadActivity&&s.push(ee(i.timeStamp,e.end)),c())})).stop}}(e,t,n,i,o,(function(e){u.loadingTime=e,r()})),f=c.setLoadEvent,d=c.stop;if(Dr("layout-shift")){u.cumulativeLayoutShift=0;var l=function(e,t){var n=0,r=function(){var e,t,n=0;return{update:function(r){void 0===e||r.startTime-t>=V||r.startTime-e>=5e3?(e=t=r.startTime,n=r.value):(n+=r.value,t=r.startTime)},value:function(){return n}}}();return{stop:e.subscribe(Jt,(function(e){for(var i of e)"layout-shift"!==i.entryType||i.hadRecentInput||(r.update(i),r.value()>n&&(n=r.value(),t(G(n,4))))})).unsubscribe}}(e,(function(e){u.cumulativeLayoutShift=e,r()}));a=l.stop}else a=j;return{stop:function(){s(),d(),a()},setLoadEvent:f,viewMetrics:u}}function Ui(e,t,n,r,i,o,a){var u,s=function(i){var o=Li(t,n,r,e,ct,te(),i),a=Mi(t,(function(e){o.updateTimings(e),o.scheduleUpdate()}));return{initialView:o,stop:a.stop}}(a),c=s.stop,f=s.initialView,d=function(){t.subscribe(nn,(function(){f.end(),f=l(void 0,{name:f.name,service:f.service,version:f.version})})),t.subscribe(on,(function(){f.end(),f.triggerUpdate()}));var e=window.setInterval((function(){f.triggerUpdate()}),3e5);return{stop:function(){clearInterval(e)}}}().stop;function l(i,o){return Li(t,n,r,e,ft,i,o)}return o&&(u=function(e){return e.subscribe((function(e){var t,n,r,i,o=e.oldLocation,a=e.newLocation;if(n=a,(t=o).pathname!==n.pathname||(r=n.hash,i=r.substr(1),!document.getElementById(i)&&$i(n.hash)!==$i(t.hash)))return f.end(),f.triggerUpdate(),void(f=l())}))}(i)),{addTiming:function(e,t){void 0===t&&(t=Y()),f.addTiming(e,t),f.scheduleUpdate()},startView:function(e,t){f.end(t),f.triggerUpdate(),f=l(t,e)},stop:function(){u&&u.unsubscribe(),c(),d(),f.end()}}}function Li(e,t,n,r,i,o,a){void 0===o&&(o=J());var u,s,c,f,p=A(),v={},h={},m=0,g=l(r);a&&(s=a.name,c=a.service,f=a.version),e.notify(Zt,{id:p,name:s,startClocks:o,service:c,version:f});var y=I(C,3e3,{leading:!1}),b=y.cancel,w=Bi(e,t,n,y,i,o),_=w.setLoadEvent,S=w.stop,x=w.viewMetrics;function C(){m+=1;var t=void 0===u?Y():u.timeStamp;e.notify(en,d({customTimings:h,documentVersion:m,id:p,name:s,service:c,version:f,loadingType:i,location:g,startClocks:o,timings:v,duration:ee(o.timeStamp,t),isActive:void 0===u},x))}return C(),{name:s,service:c,version:f,scheduleUpdate:y,end:function(t){void 0===t&&(t=J()),u=t,e.notify(tn,{endClocks:u}),S()},triggerUpdate:function(){b(),C()},updateTimings:function(e){v=e,void 0!==e.loadEvent&&_(e.loadEvent)},addTiming:function(e,t){var n=function(e){return e<31536e6}(t)?t:ee(o.timeStamp,t);h[function(e){var t=e.replace(/[^a-zA-Z0-9-_.@$]/g,"_");t!==e&&console.warn("Invalid timing name: "+e+", sanitized to: "+t);return t}(e)]=n}}}function $i(e){var t=e.indexOf("?");return t<0?e:e.slice(0,t)}function Pi(e,t,n,r,i,o){return e.subscribe(en,(function(t){e.notify(sn,function(e){var t={_dd:{document_version:e.documentVersion},date:e.startClocks.timeStamp,type:st.VIEW,view:{action:{count:e.eventCounts.actionCount},frustration:{count:e.eventCounts.frustrationCount},cumulative_layout_shift:e.cumulativeLayoutShift,first_byte:X(e.timings.firstByte),dom_complete:X(e.timings.domComplete),dom_content_loaded:X(e.timings.domContentLoaded),dom_interactive:X(e.timings.domInteractive),error:{count:e.eventCounts.errorCount},first_contentful_paint:X(e.timings.firstContentfulPaint),first_input_delay:X(e.timings.firstInputDelay),first_input_time:X(e.timings.firstInputTime),is_active:e.isActive,name:e.name,largest_contentful_paint:X(e.timings.largestContentfulPaint),load_event:X(e.timings.loadEvent),loading_time:Fi(X(e.loadingTime)),loading_type:e.loadingType,long_task:{count:e.eventCounts.longTaskCount},resource:{count:e.eventCounts.resourceCount},time_spent:X(e.duration)}};x(e.customTimings)||(t.view.custom_timings=(n=e.customTimings,r=X,i={},f(n,(function(e,t){i[t]=r(e)})),i));var n,r,i;return{rawRumEvent:t=v(t,{view:Di(e.timings)}),startTime:e.startClocks.relative,domainContext:{location:e.location}}}(t))})),Ui(n,e,r,t,i,!t.trackViewsManually,o)}function Di(e){var t=Mr(e);if(t){var n=t.fetchStart,r=t.responseEnd,i=t.domInteractive,o=t.domContentLoaded,a=t.domComplete,u=t.loadEventEnd,s=t.loadEventStart,c=t.domContentLoadedEventEnd,f={fmp:X(t.largestContentfulPaint)};if(r!==n){f.fpt=X(r-n);var d=parseInt((r-n)/1e3);f.apdexLevel=d>9?9:d}return i!==n&&(f.tti=X(i-n)),o!==n&&(f.dom_ready=X(o-n)),u!==n&&(f.load=X(u-n)),s!==c&&(f.resource_load_time=X(s-c)),a!==i&&(f.dom=X(a-i)),f}}function Fi(e){return O(e)&&e<0?void 0:e}function Ni(){this.buffer=new Uint8Array(8),ji().getRandomValues(this.buffer),this.buffer[0]=127&this.buffer[0]}function ji(){return window.crypto||window.msCrypto}function qi(e){this._spanId=(new Ni).toDecimalString(),this._traceId=(new Ni).toDecimalString(),this._traceSampled=e}function Vi(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}function Qi(e,t,n){this._spanId=Vi(),this._traceId=Vi(),this._applicationId=e.applicationId,this._env=e.env,this._version=e.version,this._urlParse=B(t).getParse(),this._traceSampled=n}function Wi(){for(var e="",t=0;t<16;t+=1){e+="0123456789abcdef"[Math.floor(16*Math.random())]}return e}function Gi(e,t){var n=Wi();e.traceId128Bit?this._traceId=Wi()+n:this._traceId=n,this._spanId=n,this._traceSampled=t}function Hi(){for(var e="",t=0;t<16;t+=1){e+="0123456789abcdef"[Math.floor(16*Math.random())]}return e}function Xi(e,t){var n=Hi();this._traceId=Hi()+n,this._spanId=n,this._traceSampled=t}function zi(){for(var e="",t=0;t<16;t+=1){e+="0123456789abcdef"[Math.floor(16*Math.random())]}return e}function Ki(e,t){var n=zi();e.traceId128Bit?this._traceId=zi()+n:this._traceId=n,this._spanId=n,this._traceSampled=t}function Ji(){for(var e="",t=0;t<16;t+=1){e+="0123456789abcdef"[Math.floor(16*Math.random())]}return e}function Yi(e,t){var n=Ji();this._traceId=Ji()+n,this._spanId=n,this._traceSampled=t}function Zi(e){0!==e.status||e.isAborted||(e.traceId=void 0,e.spanId=void 0,e.traceSampled=void 0)}function eo(e,t){var n=pe(gn(t)),r=!1;return f(e.allowedTracingOrigins,(function(e){if(n===e||e instanceof RegExp&&e.test(n))return r=!0,!1})),r}function to(e,t,n,r){if(eo(e,t.url)&&e.traceType&&n.findTrackedSession()){var i,o=!O(e.tracingSampleRate)||W(e.tracingSampleRate);switch(e.traceType){case lt:i=new qi(o);break;case mt:i=new Qi(e,t.url,o);break;case pt:i=new Ki(e,o);break;case gt:i=new Gi(e,o);break;case ht:i=new Yi(e,o);break;case vt:i=new Xi(e,o)}i&&i.isTracingSupported()&&(t.traceId=i.getTraceId(),t.spanId=i.getSpanId(),t.traceSampled=o,r(i.makeTracingHeaders()))}}Ni.prototype={toString:function(e){for(var t=this.readInt32(0),n=this.readInt32(4),r="";;){var i=t%e*4294967296+n;if(t=Math.floor(t/e),n=Math.floor(i/e),r=(i%e).toString(e)+r,!t&&!n)break}return r},toDecimalString:function(){return this.toString(10)},readInt32:function(e){return 16777216*this.buffer[e]+(this.buffer[e+1]<<16)+(this.buffer[e+2]<<8)+this.buffer[e+3]}},qi.prototype={isTracingSupported:function(){return void 0!==ji()},getSpanId:function(){return this._spanId},getTraceId:function(){return this._traceId},makeTracingHeaders:function(){return{"x-datadog-origin":"rum","x-datadog-parent-id":this.getSpanId(),"x-datadog-sampling-priority":this._traceSampled?"2":"-1","x-datadog-trace-id":this.getTraceId()}}},Qi.prototype={isTracingSupported:function(){return!!(this._env&&this._version&&this._urlParse)},getSpanId:function(){return this._spanId},getTraceId:function(){return this._traceId},getSkyWalkingSw8:function(){try{var e=String(R(this._traceId)),t=String(R(this._spanId)),n=String(R(this._applicationId+"_rum_"+this.env)),r=String(R(this._version)),i=String(R(window.location.href)),o=String(R(this._urlParse.Host));return(this._traceSampled?"1":"0")+"-"+e+"-"+t+"-0-"+n+"-"+r+"-"+i+"-"+o}catch(e){return""}},makeTracingHeaders:function(){return{sw8:this.getSkyWalkingSw8()}}},Gi.prototype={isTracingSupported:function(){return!0},getSpanId:function(){return this._spanId},getTraceId:function(){return this._traceId},getUberTraceId:function(){return this._traceId+":"+this._spanId+":0:"+(this._traceSampled?"1":"0")},makeTracingHeaders:function(){return{"uber-trace-id":this.getUberTraceId()}}},Xi.prototype={isTracingSupported:function(){return!0},getSpanId:function(){return this._spanId},getTraceId:function(){return this._traceId},getB3Str:function(){return this._traceId+"-"+this._spanId+"-"+(this._traceSampled?"1":"0")},makeTracingHeaders:function(){return{b3:this.getB3Str()}}},Ki.prototype={isTracingSupported:function(){return!0},getSpanId:function(){return this._spanId},getTraceId:function(){return this._traceId},makeTracingHeaders:function(){return{"X-B3-TraceId":this.getTraceId(),"X-B3-SpanId":this.getSpanId(),"X-B3-Sampled":this._traceSampled?"1":"0"}}},Yi.prototype={isTracingSupported:function(){return!0},getSpanId:function(){return this._spanId},getTraceId:function(){return this._traceId},getTraceParent:function(){return"00-"+this._traceId+"-"+this._spanId+"-"+(this._traceSampled?"01":"00")},makeTracingHeaders:function(){return{traceparent:this.getTraceParent()}}};var no=1;function ro(e,t,n){var r=function(e,t){return{clearTracingIfNeeded:Zi,traceFetch:function(n){return to(e,n,t,(function(e){if(!(n.input instanceof Request)||n.init&&n.init.headers){n.init=l(n.init);var t=[];n.init.headers instanceof Headers?n.init.headers.forEach((function(e,n){t.push([n,e])})):h(n.init.headers)?f(n.init.headers,(function(e){t.push(e)})):n.init.headers&&f(n.init.headers,(function(e,n){t.push([n,e])}));var r={};f(t.concat(C(e)),(function(e){r[e[0]]=e[1]})),n.init.headers=r}else n.input=new Request(n.input),f(e,(function(e,t){n.input.headers.append(t,e)}))}))},traceXhr:function(n,r){return to(e,n,t,(function(e){f(e,(function(e,t){r.setRequestHeader(t,e)}))}))}}}(t,n);!function(e,t,n){var r=Mn().subscribe((function(r){var i=r;if($r(t,i.url))switch(i.state){case"start":n.traceXhr(i,i.xhr),i.requestIndex=io(),e.notify(an,{requestIndex:i.requestIndex,url:i.url});break;case"complete":n.clearTracingIfNeeded(i),e.notify(un,{duration:i.duration,method:i.method,requestIndex:i.requestIndex,spanId:i.spanId,startClocks:i.startClocks,status:i.status,traceId:i.traceId,traceSampled:i.traceSampled,type:dt.XHR,url:i.url,xhr:i.xhr})}}))}(e,t,r),function(e,t,n){var r=Rn().subscribe((function(r){var i=r;if($r(t,i.url))switch(i.state){case"start":n.traceFetch(i),i.requestIndex=io(),e.notify(an,{requestIndex:i.requestIndex,url:i.url});break;case"complete":n.clearTracingIfNeeded(i),e.notify(un,{duration:i.duration,method:i.method,requestIndex:i.requestIndex,responseType:i.responseType,spanId:i.spanId,startClocks:i.startClocks,status:i.status,traceId:i.traceId,traceSampled:i.traceSampled,type:dt.FETCH,url:i.url,response:i.response,init:i.init,input:i.input})}}))}(e,t,r)}function io(){var e=no;return no+=1,e}function oo(e){if(performance&&"getEntriesByName"in performance){var t=performance.getEntriesByName(e.url,"resource");if(t.length&&"toJSON"in t[0]){var n,r=w(t,(function(e){return e.toJSON()}));return r=b(r,Mr),1===(r=b(r,(function(t){return n=t,r=e.startClocks.relative,i=ao({startTime:e.startClocks.relative,duration:e.duration}),o=1,n.startTime>=r-o&&ao(n)<=i+o;var n,r,i,o}))).length?r[0]:2===r.length&&ao((n=r)[0])<=n[1].startTime?r[1]:void 0}}}function ao(e){return e.startTime+e.duration}function uo(e,t){e.subscribe(un,(function(t){e.notify(sn,function(e){var t=e.type===dt.XHR?Xe:Ke,n=oo(e),r=n?ne(n.startTime):e.startClocks,i=n?co(n):void 0,o=function(e){if(!(e.traceSampled&&e.traceId&&e.spanId))return;return{_dd:{spanId:e.spanId,traceId:e.traceId},resource:{id:A()}}}(e),a=B(e.url).getParse(),u=v({date:r.timeStamp,resource:{id:A,type:t,duration:H(e.duration),method:e.method,status:e.status,statusGroup:D(e.status),url:e.url,urlHost:a.Host,urlPath:a.Path,urlPathGroup:M(a.Path),urlQuery:F(U(e.url))},type:st.RESOURCE},o,i);return{startTime:r.relative,rawRumEvent:u,domainContext:{performanceEntry:n&&fo(n),xhr:e.xhr,response:e.response,requestInput:e.input,requestInit:e.init,error:e.error}}}(t))})),e.subscribe(Jt,(function(t){for(var n of t)"resource"===n.entryType&&("xmlhttprequest"!==(r=n).initiatorType&&"fetch"!==r.initiatorType)&&e.notify(sn,so(n));var r}))}function so(e){var t=Ir(e),n=co(e),r=function(e){return e.traceId?{_dd:{traceId:e.traceId}}:void 0}(e),i=B(e.name).getParse(),o="";!function(e){return e.encodedBodySize>0&&e.transferSize>0&&e.transferSize<e.encodedBodySize||null}(e)?function(e){return!(e.transferSize>0)&&(e.decodedBodySize>0||e.duration<30)}(e)&&(o=200):o=304;var a=ne(e.startTime),u=v({date:a.timeStamp,resource:{id:A(),type:t,url:e.name,urlHost:i.Host,urlPath:i.Path,urlPathGroup:M(i.Path),urlQuery:F(U(e.name)),method:"GET",status:o,statusGroup:D(o)},type:st.RESOURCE},r,n);return{startTime:a.relative,rawRumEvent:u,domainContext:{performanceEntry:fo(e)}}}function co(e){return{resource:v({},{duration:(t=e,0===t.duration&&t.startTime<t.responseEnd?H(t.responseEnd-t.startTime):H(t.duration)),size:Lr(e)},Ar(e))};var t}function fo(e){return"function"==typeof PerformanceEntry&&e instanceof PerformanceEntry&&e.toJSON(),e}var lo={sdkVersion:"2.2.3",sdkName:"df_web_rum_sdk"};var po,vo,ho,mo,go=function(e){var t,n,r=!1,i=fe(),o=fe(),a=new _e,u=function(e,t){void 0===t&&(t=Y()),a.add((function(){return u(e,t)}))},s=function(e,t){void 0===t&&(t=J()),a.add((function(){return s(e,t)}))},c=function(e,t){void 0===t&&(t={context:i.getContext(),user:o.getContext()}),a.add((function(){return c(e,t)}))},f=function(e,t){void 0===t&&(t={context:i.getContext(),user:o.getContext()}),a.add((function(){return f(e,t)}))},l=function(){},v=function(){};function m(t,n){var r=e(t,(function(){return{user:o.getContext(),context:i.getContext()}}),n);s=r.startView,c=r.addAction,f=r.addError,u=r.addTiming,l=r.getInternalContext,a.drain()}return t={init:function(e){if(function(e){return function(e){if(void 0===document.cookie||null===document.cookie)return!1;try{var t="dd_cookie_test_".concat(A()),n="test";return _n(t,n,V,e),Sn(t)===n}catch(e){return console.error(e),!1}}(In(e))?"file:"!==window.location.protocol||(Te.error("Execution is not allowed in the current context."),!1):(Te.warn("Cookies are not authorized, we will not send any data."),!1)}(e)&&function(e){return!r||(e.silentMultipleInit||Te.error("DATAFLUX_RUM is already initialized."),!1)}(e)){var t=function(e){if(e.applicationId){if(!e.datakitUrl&&!e.datakitOrigin)return Te.error("datakitOrigin is not configured, no RUM data will be collected."),!1;if(void 0===e.sessionReplaySampleRate||le(e.sessionReplaySampleRate))if(void 0===e.allowedTracingOrigins||h(e.allowedTracingOrigins))if(void 0===e.allowedDDTracingOrigins||h(e.allowedDDTracingOrigins))if(void 0===e.tracingSampleRate||le(e.tracingSampleRate))if(void 0===e.excludedActivityUrls||h(e.excludedActivityUrls)){var t=kn(e);if(t){var n=!!e.trackFrustrations;return d({applicationId:e.applicationId,actionNameAttribute:e.actionNameAttribute,sessionReplaySampleRate:be(e.sessionReplaySampleRate,100),tracingSampleRate:e.tracingSampleRate,allowedTracingOrigins:be(e.allowedTracingOrigins||e.allowedDDTracingOrigins,[]),excludedActivityUrls:be(e.excludedActivityUrls,[]),trackInteractions:!!e.trackInteractions||n,trackFrustrations:n,trackViewsManually:!!e.trackViewsManually,traceType:be(e.traceType,lt),traceId128Bit:!!e.traceId128Bit,isJsBirdge:!!e.isJsBirdge},t,lo)}}else Te.error("Excluded Activity Urls should be an array");else Te.error("Tracing Sample Rate should be a number between 0 and 100");else Te.error("Allowed Tracing Origins should be an array");else Te.error("Allowed Tracing Origins should be an array");else Te.error("Premium Sample Rate should be a number between 0 and 100")}else Te.error("Application ID is not configured, no RUM data will be collected.")}(e);if(t){if(t.trackViewsManually){var n=a;a=new _e,s=function(e){m(t,e)},n.drain()}else m(t);v=function(){return P(e)},r=!0}}},addRumGlobalContext:i.add,setGlobalContextProperty:i.setContextProperty,removeRumGlobalContext:i.remove,removeGlobalContextProperty:i.removeContextProperty,getRumGlobalContext:i.get,getGlobalContext:i.getContext,setRumGlobalContext:i.set,setGlobalContext:i.setContext,clearGlobalContext:i.clearContext,getInitConfiguration:function(){return v()},getInternalContext:function(e){return l(e)},addDebugSession:function(e){},clearDebugSession:function(){},getDebugSession:function(){},addAction:function(e,t){c({name:e,context:P(t),startClocks:J(),type:it})},addError:function(e,t){var n=$t();f({error:e,handlingStack:n,context:P(t),startClocks:J()})},addTiming:function(e,t){u(e,t)},setUser:function(e){"object"==typeof e&&e?o.setContext(g(e)):Te.error("Unsupported user:",e)},getUser:o.getContext,setUserProperty:function(e,t){var n={};n[e]=t;var r=g(n)[e];o.setContextProperty(e,r)},removeUserProperty:o.removeContextProperty,removeUser:o.clearContext,clearUser:o.clearContext,startView:function(e){s("object"==typeof e?e:{name:e})}},n=p({},t,{onReady:function(e){e()}}),Object.defineProperty(n,"_setDebug",{get:function(){return setDebugMode},enumerable:!1}),n;function g(e){var t=d(e,{});return"id"in t&&(t.id=String(t.id)),"name"in t&&(t.name=String(t.name)),"email"in t&&(t.email=String(t.email)),t}}((function(e,t,n){var r=new dn,i=function(e){r.notify(fn,{error:e})};_i(e,r,i);var o=Cr(e,r),a=function(e){var t=Sn(Er);return t||(t=A(),_n(Er,t,5184e6,e.cookieOptions)),{getId:function(){return t}}}(e),u=Vr(),s=Qr(location),c=function(e,t,n,r,i,o,a,u,s){var c=function(e){var t=new xe(144e5);return e.subscribe(Zt,(function(e){t.add(function(e){return{service:e.service,version:e.version,id:e.id,name:e.name}}(e),e.startClocks.relative)})),e.subscribe(tn,(function(e){t.closeActive(e.endClocks.relative)})),e.subscribe(nn,(function(){t.reset()})),{findView:function(e){return t.find(e)},stop:function(){t.stop()}}}(t),f=function(e,t,n){var r,i=new xe(144e5);e.subscribe(tn,(function(e){i.closeActive(e.endClocks.relative)})),e.subscribe(Zt,(function(e){var t=n.href;i.add(a({url:t,location:n,referrer:r||document.referrer}),e.startClocks.relative),r=t}));var o=t.subscribe((function(e){var t=i.find();if(t){var n=K();i.closeActive(n),i.add(a({url:e.newLocation.href,location:e.newLocation,referrer:t.referrer}),n)}}));function a(e){return{url:e.url,referrer:e.referrer,host:e.location.host,path:e.location.pathname,pathGroup:M(e.location.pathname),urlQuery:F(U(e.location.href))}}return{findUrl:function(e){return i.find(e)},stop:function(){o.unsubscribe(),i.stop()}}}(t,o,e),d=function(e,t,n){e.subscribe(Yt,(function(t){e.notify(sn,bi(t))}));var r={findActionId:j};return n.trackInteractions&&(r=vi(e,t,n).actionContexts),{actionContexts:r,addAction:function(t,n){e.notify(sn,p({savedCommonContext:n},bi(t)))}}}(t,a,n),l=d.actionContexts;return Ei(n,t,r,i,c,f,l,u,s),{viewContexts:c,urlContexts:f,addAction:d.addAction,actionContexts:l,stop:function(){c.stop()}}}(location,r,e,o,a,s,u,t,i),f=c.viewContexts,d=c.urlContexts,l=c.actionContexts;!function(e,t){e.subscribe(Jt,(function(n){for(var r of n){if("longtask"!==r.entryType)return;if(!t.findTrackedSession(r.startTime))break;var i=ne(r.startTime),o={date:i.timeStamp,long_task:{id:A(),duration:X(r.duration)},type:st.LONG_TASK};e.notify(sn,{rawRumEvent:o,startTime:i.relative,domainContext:{performanceEntry:r.toJSON()}})}}))}(r,o),uo(r);var v=Pi(r,e,location,u,s,n),h=v.addTiming,m=v.startView,g=Ii(r).addError;ro(r,e,o),Fr(r,e);var y=function(e,t,n,r,i){return{get:function(o){var a=n.findView(o),u=i.findUrl(o),s=t.findTrackedSession(o);if(s&&a&&u){var c=r.findActionId(o);return{application:{id:e},session:{id:s.id},userAction:c?{id:c}:void 0,view:{id:a.id,name:a.name,url:u.url,referrer:u.referrer,host:u.host,path:u.pathname,pathGroup:u.pathGroup,urlQuery:u.urlQuery}}}}}}(e.applicationId,o,f,l,d);return{addAction:c.addAction,addError:g,addTiming:h,configuration:e,lifeCycle:r,viewContexts:f,session:o,startView:m,getInternalContext:y.get}}));return po=function(){if("object"==typeof globalThis)return globalThis;Object.defineProperty(Object.prototype,"_dd_temp_",{get:function(){return this},configurable:!0});var e=_dd_temp_;return delete Object.prototype._dd_temp_,"object"!=typeof e&&(e="object"==typeof self?self:"object"==typeof window?window:{}),e}(),ho=go,mo=po[vo="DATAFLUX_RUM"],po[vo]=ho,mo&&mo.q&&f(mo.q,(function(e){e()})),function(r,i,o){var a=e(e({},{env:"production",version:"1.0.0",traceType:"jaeger",trackInteractions:!0}),i);return go.init(a),{name:"Guance.com",type:"destination",version:"2.1.5-1",isLoaded:function(){return!0},load:function(){return Promise.resolve()},track:function(e){return t(this,void 0,void 0,(function(){var t;return n(this,(function(n){return t=e.event,go.addAction(t.event,t),[2,Promise.resolve()]}))}))},page:function(){return Promise.resolve()}}}}();